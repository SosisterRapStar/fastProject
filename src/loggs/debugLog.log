[INFO|server|L265] 2024-04-11T18:22:38+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:22:38+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:22:38+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:22:38+0300: Finished server process [43032]
[DEBUG|selector_events|L54] 2024-04-11T18:22:42+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:22:43+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:22:43+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:22:43+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:22:43+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:22:43+0300: Started server process [43128]
[INFO|on|L46] 2024-04-11T18:22:43+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:22:43+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:22:43+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T18:22:54+0300: 127.0.0.1:58566 - "GET /api/v1/users/invites/me HTTP/1.1" 404
[DEBUG|dependency_auth|L42] 2024-04-11T18:23:01+0300: Request for curr user id
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:23:01+0300: Message.user setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:23:01+0300: Message.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:01+0300: Message.user synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:01+0300: Message.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:01+0300: Message.user local/remote pairs [(message.user_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:01+0300: Message.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:23:01+0300: Message.user local columns [message.user_fk]
[INFO|relationships|L2362] 2024-04-11T18:23:01+0300: Message.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:01+0300: Message.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:01+0300: Message.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop in_conversation
[INFO|relationships|L2328] 2024-04-11T18:23:01+0300: Message.in_conversation setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:23:01+0300: Message.in_conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:01+0300: Message.in_conversation synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:01+0300: Message.in_conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:01+0300: Message.in_conversation local/remote pairs [(message.conversation_fk / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:01+0300: Message.in_conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:23:01+0300: Message.in_conversation local columns [message.conversation_fk]
[INFO|relationships|L2362] 2024-04-11T18:23:01+0300: Message.in_conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:01+0300: Message.in_conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:01+0300: Message.in_conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop content
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop user_fk
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Message|message) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:23:01+0300: (Conversation|conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop user_admin
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: Conversation.user_admin setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: Conversation.user_admin setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: Conversation.user_admin synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: Conversation.user_admin secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: Conversation.user_admin local/remote pairs [(conversation.user_admin_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: Conversation.user_admin remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: Conversation.user_admin local columns [conversation.user_admin_fk]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: Conversation.user_admin relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: Conversation.user_admin lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:02+0300: Conversation.user_admin will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: Conversation.messages setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: Conversation.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: Conversation.messages synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: Conversation.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: Conversation.messages local/remote pairs [(conversation.id / message.conversation_fk)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: Conversation.messages remote columns [message.conversation_fk]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: Conversation.messages local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: Conversation.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: Conversation.messages lazy loading clause :param_1 = message.conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop asoc_users
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: Conversation.asoc_users setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: Conversation.asoc_users setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: Conversation.asoc_users synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: Conversation.asoc_users secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: Conversation.asoc_users local/remote pairs [(conversation.id / user_conversation.conversation_id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: Conversation.asoc_users remote columns [user_conversation.conversation_id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: Conversation.asoc_users local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: Conversation.asoc_users relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: Conversation.asoc_users lazy loading clause :param_1 = user_conversation.conversation_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Conversation|conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop conversation
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation local/remote pairs [(user_conversation.conversation_id / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation local columns [user_conversation.conversation_id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:02+0300: UserConversationSecondary.conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: UserConversationSecondary.user setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: UserConversationSecondary.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: UserConversationSecondary.user synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: UserConversationSecondary.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: UserConversationSecondary.user local/remote pairs [(user_conversation.user_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: UserConversationSecondary.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: UserConversationSecondary.user local columns [user_conversation.user_id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: UserConversationSecondary.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: UserConversationSecondary.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:02+0300: UserConversationSecondary.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop edit_permission
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) initialize prop conversation_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop inviter
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: Invite.inviter setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: Invite.inviter setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: Invite.inviter synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: Invite.inviter secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: Invite.inviter local/remote pairs [(invite.inviter_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: Invite.inviter remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: Invite.inviter local columns [invite.inviter_id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: Invite.inviter relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: Invite.inviter lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:02+0300: Invite.inviter will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop invitee
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: Invite.invitee setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: Invite.invitee setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: Invite.invitee synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: Invite.invitee secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: Invite.invitee local/remote pairs [(invite.invitee_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: Invite.invitee remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: Invite.invitee local columns [invite.invitee_id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: Invite.invitee relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: Invite.invitee lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:23:02+0300: Invite.invitee will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop inviter_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop invitee_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Invite|invite) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Friends|friendship) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Friends|friendship) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Friends|friendship) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Friends|friendship) initialize prop friend_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (Friends|friendship) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop admin_convs
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.admin_convs setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.admin_convs setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.admin_convs synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.admin_convs secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.admin_convs local/remote pairs [(user.id / conversation.user_admin_fk)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.admin_convs remote columns [conversation.user_admin_fk]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.admin_convs local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.admin_convs relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.admin_convs lazy loading clause :param_1 = conversation.user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.messages setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.messages synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.messages local/remote pairs [(user.id / message.user_fk)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.messages remote columns [message.user_fk]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.messages local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.messages lazy loading clause :param_1 = message.user_fk
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop sended_invites
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.sended_invites setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.sended_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.sended_invites synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.sended_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.sended_invites local/remote pairs [(user.id / invite.inviter_id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.sended_invites remote columns [invite.inviter_id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.sended_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.sended_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.sended_invites lazy loading clause :param_1 = invite.inviter_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop received_invites
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.received_invites setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.received_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.received_invites synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.received_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.received_invites local/remote pairs [(user.id / invite.invitee_id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.received_invites remote columns [invite.invitee_id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.received_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.received_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.received_invites lazy loading clause :param_1 = invite.invitee_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop asoc_conversations
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.asoc_conversations setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.asoc_conversations setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.asoc_conversations synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.asoc_conversations secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.asoc_conversations local/remote pairs [(user.id / user_conversation.user_id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.asoc_conversations remote columns [user_conversation.user_id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.asoc_conversations local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.asoc_conversations relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.asoc_conversations lazy loading clause :param_1 = user_conversation.user_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop friends
[INFO|relationships|L2328] 2024-04-11T18:23:02+0300: User.friends setup primary join "user".id = friendship.user_id
[INFO|relationships|L2329] 2024-04-11T18:23:02+0300: User.friends setup secondary join "user".id = friendship.friend_id
[INFO|relationships|L2330] 2024-04-11T18:23:02+0300: User.friends synchronize pairs [(user.id => friendship.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:23:02+0300: User.friends secondary synchronize pairs [(user.id => friendship.friend_id)]
[INFO|relationships|L2345] 2024-04-11T18:23:02+0300: User.friends local/remote pairs [(user.id / friendship.user_id),(user.id / friendship.friend_id)]
[INFO|relationships|L2352] 2024-04-11T18:23:02+0300: User.friends remote columns [friendship.user_id,friendship.friend_id]
[INFO|relationships|L2357] 2024-04-11T18:23:02+0300: User.friends local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:23:02+0300: User.friends relationship direction RelationshipDirection.MANYTOMANY
[INFO|strategies|L734] 2024-04-11T18:23:02+0300: User.friends lazy loading clause :param_1 = friendship.user_id AND "user".id = friendship.friend_id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop email
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop is_active
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop password
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:23:02+0300: (User|user) _post_configure_properties() complete
[INFO|base|L1892] 2024-04-11T18:23:02+0300: select pg_catalog.version()
[INFO|base|L1897] 2024-04-11T18:23:02+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:23:02+0300: select current_schema()
[INFO|base|L1897] 2024-04-11T18:23:02+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:23:02+0300: show standard_conforming_strings
[INFO|base|L1897] 2024-04-11T18:23:02+0300: [raw sql] ()
[INFO|base|L1089] 2024-04-11T18:23:02+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:23:02+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:23:02+0300: [generated in 0.00036s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:23:02+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1115] 2024-04-11T18:23:02+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:23:02+0300: 127.0.0.1:38960 - "GET /api/v1/users/me HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:24:49+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:24:49+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:24:49+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:24:49+0300: Finished server process [43128]
[DEBUG|selector_events|L54] 2024-04-11T18:24:53+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:24:53+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:24:53+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:24:53+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:24:53+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:24:54+0300: Started server process [43655]
[INFO|on|L46] 2024-04-11T18:24:54+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:24:54+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:24:54+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:25:00+0300: Request for curr user id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Message.user setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Message.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Message.user synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Message.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Message.user local/remote pairs [(message.user_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Message.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Message.user local columns [message.user_fk]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Message.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Message.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: Message.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop in_conversation
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Message.in_conversation setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Message.in_conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Message.in_conversation synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Message.in_conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Message.in_conversation local/remote pairs [(message.conversation_fk / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Message.in_conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Message.in_conversation local columns [message.conversation_fk]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Message.in_conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Message.in_conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: Message.in_conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop content
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop user_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Message|message) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop user_admin
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Conversation.user_admin setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Conversation.user_admin setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Conversation.user_admin synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Conversation.user_admin secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Conversation.user_admin local/remote pairs [(conversation.user_admin_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Conversation.user_admin remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Conversation.user_admin local columns [conversation.user_admin_fk]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Conversation.user_admin relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Conversation.user_admin lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: Conversation.user_admin will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Conversation.messages setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Conversation.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Conversation.messages synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Conversation.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Conversation.messages local/remote pairs [(conversation.id / message.conversation_fk)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Conversation.messages remote columns [message.conversation_fk]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Conversation.messages local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Conversation.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Conversation.messages lazy loading clause :param_1 = message.conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop asoc_users
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Conversation.asoc_users setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Conversation.asoc_users setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Conversation.asoc_users synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Conversation.asoc_users secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Conversation.asoc_users local/remote pairs [(conversation.id / user_conversation.conversation_id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Conversation.asoc_users remote columns [user_conversation.conversation_id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Conversation.asoc_users local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Conversation.asoc_users relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Conversation.asoc_users lazy loading clause :param_1 = user_conversation.conversation_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Conversation|conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop conversation
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation local/remote pairs [(user_conversation.conversation_id / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation local columns [user_conversation.conversation_id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: UserConversationSecondary.conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: UserConversationSecondary.user setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: UserConversationSecondary.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: UserConversationSecondary.user synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: UserConversationSecondary.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: UserConversationSecondary.user local/remote pairs [(user_conversation.user_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: UserConversationSecondary.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: UserConversationSecondary.user local columns [user_conversation.user_id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: UserConversationSecondary.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: UserConversationSecondary.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: UserConversationSecondary.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop edit_permission
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) initialize prop conversation_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop inviter
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Invite.inviter setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Invite.inviter setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Invite.inviter synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Invite.inviter secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Invite.inviter local/remote pairs [(invite.inviter_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Invite.inviter remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Invite.inviter local columns [invite.inviter_id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Invite.inviter relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Invite.inviter lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: Invite.inviter will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop invitee
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: Invite.invitee setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: Invite.invitee setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: Invite.invitee synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: Invite.invitee secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: Invite.invitee local/remote pairs [(invite.invitee_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: Invite.invitee remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: Invite.invitee local columns [invite.invitee_id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: Invite.invitee relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: Invite.invitee lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:25:00+0300: Invite.invitee will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop inviter_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop invitee_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Invite|invite) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Friends|friendship) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Friends|friendship) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Friends|friendship) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Friends|friendship) initialize prop friend_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (Friends|friendship) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop admin_convs
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.admin_convs setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.admin_convs setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.admin_convs synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.admin_convs secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.admin_convs local/remote pairs [(user.id / conversation.user_admin_fk)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.admin_convs remote columns [conversation.user_admin_fk]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.admin_convs local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.admin_convs relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.admin_convs lazy loading clause :param_1 = conversation.user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.messages setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.messages synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.messages local/remote pairs [(user.id / message.user_fk)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.messages remote columns [message.user_fk]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.messages local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.messages lazy loading clause :param_1 = message.user_fk
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop sended_invites
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.sended_invites setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.sended_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.sended_invites synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.sended_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.sended_invites local/remote pairs [(user.id / invite.inviter_id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.sended_invites remote columns [invite.inviter_id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.sended_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.sended_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.sended_invites lazy loading clause :param_1 = invite.inviter_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop received_invites
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.received_invites setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.received_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.received_invites synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.received_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.received_invites local/remote pairs [(user.id / invite.invitee_id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.received_invites remote columns [invite.invitee_id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.received_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.received_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.received_invites lazy loading clause :param_1 = invite.invitee_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop asoc_conversations
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.asoc_conversations setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.asoc_conversations setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.asoc_conversations synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.asoc_conversations secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.asoc_conversations local/remote pairs [(user.id / user_conversation.user_id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.asoc_conversations remote columns [user_conversation.user_id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.asoc_conversations local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.asoc_conversations relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.asoc_conversations lazy loading clause :param_1 = user_conversation.user_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop friends
[INFO|relationships|L2328] 2024-04-11T18:25:00+0300: User.friends setup primary join "user".id = friendship.user_id
[INFO|relationships|L2329] 2024-04-11T18:25:00+0300: User.friends setup secondary join "user".id = friendship.friend_id
[INFO|relationships|L2330] 2024-04-11T18:25:00+0300: User.friends synchronize pairs [(user.id => friendship.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:25:00+0300: User.friends secondary synchronize pairs [(user.id => friendship.friend_id)]
[INFO|relationships|L2345] 2024-04-11T18:25:00+0300: User.friends local/remote pairs [(user.id / friendship.user_id),(user.id / friendship.friend_id)]
[INFO|relationships|L2352] 2024-04-11T18:25:00+0300: User.friends remote columns [friendship.user_id,friendship.friend_id]
[INFO|relationships|L2357] 2024-04-11T18:25:00+0300: User.friends local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:25:00+0300: User.friends relationship direction RelationshipDirection.MANYTOMANY
[INFO|strategies|L734] 2024-04-11T18:25:00+0300: User.friends lazy loading clause :param_1 = friendship.user_id AND "user".id = friendship.friend_id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop email
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop is_active
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop password
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:25:00+0300: (User|user) _post_configure_properties() complete
[INFO|base|L1892] 2024-04-11T18:25:00+0300: select pg_catalog.version()
[INFO|base|L1897] 2024-04-11T18:25:00+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:25:00+0300: select current_schema()
[INFO|base|L1897] 2024-04-11T18:25:00+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:25:00+0300: show standard_conforming_strings
[INFO|base|L1897] 2024-04-11T18:25:00+0300: [raw sql] ()
[INFO|base|L1089] 2024-04-11T18:25:00+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:25:00+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:25:00+0300: [generated in 0.00034s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:25:00+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1115] 2024-04-11T18:25:00+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:25:00+0300: 127.0.0.1:33874 - "GET /api/v1/users/me HTTP/1.1" 200
[DEBUG|dependency_auth|L42] 2024-04-11T18:25:18+0300: Request for curr user id
[INFO|base|L1089] 2024-04-11T18:25:18+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:25:18+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:25:18+0300: [cached since 17.93s ago] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:25:18+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1892] 2024-04-11T18:25:18+0300: SELECT invite.status AS invite_status, invite.inviter_id AS invite_inviter_id, invite.invitee_id AS invite_invitee_id, invite.created_at AS invite_created_at, invite.updated_at AS invite_updated_at, invite.id AS invite_id 
FROM invite 
WHERE $1::UUID = invite.inviter_id
[INFO|base|L1897] 2024-04-11T18:25:18+0300: [generated in 0.00043s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[INFO|base|L1115] 2024-04-11T18:25:18+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:25:18+0300: 127.0.0.1:38924 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:27:36+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:27:36+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:27:36+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:27:36+0300: Finished server process [43655]
[DEBUG|selector_events|L54] 2024-04-11T18:30:17+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:30:18+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:30:18+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:30:18+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:30:18+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:30:18+0300: Started server process [46052]
[INFO|on|L46] 2024-04-11T18:30:18+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:30:18+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:30:18+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:30:24+0300: Request for curr user id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Message.user setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Message.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Message.user synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Message.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Message.user local/remote pairs [(message.user_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Message.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Message.user local columns [message.user_fk]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Message.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Message.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: Message.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop in_conversation
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Message.in_conversation setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Message.in_conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Message.in_conversation synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Message.in_conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Message.in_conversation local/remote pairs [(message.conversation_fk / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Message.in_conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Message.in_conversation local columns [message.conversation_fk]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Message.in_conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Message.in_conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: Message.in_conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop content
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop user_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Message|message) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop user_admin
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Conversation.user_admin setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Conversation.user_admin setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Conversation.user_admin synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Conversation.user_admin secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Conversation.user_admin local/remote pairs [(conversation.user_admin_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Conversation.user_admin remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Conversation.user_admin local columns [conversation.user_admin_fk]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Conversation.user_admin relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Conversation.user_admin lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: Conversation.user_admin will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Conversation.messages setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Conversation.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Conversation.messages synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Conversation.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Conversation.messages local/remote pairs [(conversation.id / message.conversation_fk)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Conversation.messages remote columns [message.conversation_fk]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Conversation.messages local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Conversation.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Conversation.messages lazy loading clause :param_1 = message.conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop asoc_users
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Conversation.asoc_users setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Conversation.asoc_users setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Conversation.asoc_users synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Conversation.asoc_users secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Conversation.asoc_users local/remote pairs [(conversation.id / user_conversation.conversation_id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Conversation.asoc_users remote columns [user_conversation.conversation_id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Conversation.asoc_users local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Conversation.asoc_users relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Conversation.asoc_users lazy loading clause :param_1 = user_conversation.conversation_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Conversation|conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop conversation
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation local/remote pairs [(user_conversation.conversation_id / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation local columns [user_conversation.conversation_id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: UserConversationSecondary.conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: UserConversationSecondary.user setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: UserConversationSecondary.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: UserConversationSecondary.user synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: UserConversationSecondary.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: UserConversationSecondary.user local/remote pairs [(user_conversation.user_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: UserConversationSecondary.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: UserConversationSecondary.user local columns [user_conversation.user_id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: UserConversationSecondary.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: UserConversationSecondary.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: UserConversationSecondary.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop edit_permission
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) initialize prop conversation_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop inviter
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Invite.inviter setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Invite.inviter setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Invite.inviter synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Invite.inviter secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Invite.inviter local/remote pairs [(invite.inviter_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Invite.inviter remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Invite.inviter local columns [invite.inviter_id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Invite.inviter relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Invite.inviter lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: Invite.inviter will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop invitee
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: Invite.invitee setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: Invite.invitee setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: Invite.invitee synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: Invite.invitee secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: Invite.invitee local/remote pairs [(invite.invitee_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: Invite.invitee remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: Invite.invitee local columns [invite.invitee_id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: Invite.invitee relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: Invite.invitee lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:30:24+0300: Invite.invitee will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop inviter_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop invitee_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Invite|invite) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Friends|friendship) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Friends|friendship) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Friends|friendship) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Friends|friendship) initialize prop friend_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (Friends|friendship) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop admin_convs
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.admin_convs setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.admin_convs setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.admin_convs synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.admin_convs secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.admin_convs local/remote pairs [(user.id / conversation.user_admin_fk)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.admin_convs remote columns [conversation.user_admin_fk]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.admin_convs local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.admin_convs relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.admin_convs lazy loading clause :param_1 = conversation.user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.messages setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.messages synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.messages local/remote pairs [(user.id / message.user_fk)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.messages remote columns [message.user_fk]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.messages local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.messages lazy loading clause :param_1 = message.user_fk
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop sended_invites
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.sended_invites setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.sended_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.sended_invites synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.sended_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.sended_invites local/remote pairs [(user.id / invite.inviter_id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.sended_invites remote columns [invite.inviter_id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.sended_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.sended_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.sended_invites lazy loading clause :param_1 = invite.inviter_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop received_invites
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.received_invites setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.received_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.received_invites synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.received_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.received_invites local/remote pairs [(user.id / invite.invitee_id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.received_invites remote columns [invite.invitee_id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.received_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.received_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.received_invites lazy loading clause :param_1 = invite.invitee_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop asoc_conversations
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.asoc_conversations setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.asoc_conversations setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.asoc_conversations synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.asoc_conversations secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.asoc_conversations local/remote pairs [(user.id / user_conversation.user_id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.asoc_conversations remote columns [user_conversation.user_id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.asoc_conversations local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.asoc_conversations relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.asoc_conversations lazy loading clause :param_1 = user_conversation.user_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop friends
[INFO|relationships|L2328] 2024-04-11T18:30:24+0300: User.friends setup primary join "user".id = friendship.user_id
[INFO|relationships|L2329] 2024-04-11T18:30:24+0300: User.friends setup secondary join "user".id = friendship.friend_id
[INFO|relationships|L2330] 2024-04-11T18:30:24+0300: User.friends synchronize pairs [(user.id => friendship.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:30:24+0300: User.friends secondary synchronize pairs [(user.id => friendship.friend_id)]
[INFO|relationships|L2345] 2024-04-11T18:30:24+0300: User.friends local/remote pairs [(user.id / friendship.user_id),(user.id / friendship.friend_id)]
[INFO|relationships|L2352] 2024-04-11T18:30:24+0300: User.friends remote columns [friendship.friend_id,friendship.user_id]
[INFO|relationships|L2357] 2024-04-11T18:30:24+0300: User.friends local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:30:24+0300: User.friends relationship direction RelationshipDirection.MANYTOMANY
[INFO|strategies|L734] 2024-04-11T18:30:24+0300: User.friends lazy loading clause :param_1 = friendship.user_id AND "user".id = friendship.friend_id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop email
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop is_active
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop password
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:30:24+0300: (User|user) _post_configure_properties() complete
[INFO|base|L1892] 2024-04-11T18:30:24+0300: select pg_catalog.version()
[INFO|base|L1897] 2024-04-11T18:30:24+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:30:24+0300: select current_schema()
[INFO|base|L1897] 2024-04-11T18:30:24+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:30:24+0300: show standard_conforming_strings
[INFO|base|L1897] 2024-04-11T18:30:24+0300: [raw sql] ()
[INFO|base|L1089] 2024-04-11T18:30:24+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:30:24+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:30:24+0300: [generated in 0.00037s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:30:24+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1892] 2024-04-11T18:30:24+0300: SELECT invite.status AS invite_status, invite.inviter_id AS invite_inviter_id, invite.invitee_id AS invite_invitee_id, invite.created_at AS invite_created_at, invite.updated_at AS invite_updated_at, invite.id AS invite_id 
FROM invite 
WHERE $1::UUID = invite.inviter_id
[INFO|base|L1897] 2024-04-11T18:30:24+0300: [generated in 0.00035s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[INFO|base|L1115] 2024-04-11T18:30:24+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:30:24+0300: 127.0.0.1:49064 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:31:33+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:31:33+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:31:33+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:31:33+0300: Finished server process [46052]
[DEBUG|selector_events|L54] 2024-04-11T18:31:34+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:31:35+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:31:35+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:31:35+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:31:35+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:31:35+0300: Started server process [46425]
[INFO|on|L46] 2024-04-11T18:31:35+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:31:35+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:31:35+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:31:37+0300: Request for curr user id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Message.user setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Message.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Message.user synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Message.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Message.user local/remote pairs [(message.user_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Message.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Message.user local columns [message.user_fk]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Message.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Message.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: Message.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop in_conversation
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Message.in_conversation setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Message.in_conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Message.in_conversation synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Message.in_conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Message.in_conversation local/remote pairs [(message.conversation_fk / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Message.in_conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Message.in_conversation local columns [message.conversation_fk]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Message.in_conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Message.in_conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: Message.in_conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop content
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop user_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Message|message) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop user_admin
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Conversation.user_admin setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Conversation.user_admin setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Conversation.user_admin synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Conversation.user_admin secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Conversation.user_admin local/remote pairs [(conversation.user_admin_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Conversation.user_admin remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Conversation.user_admin local columns [conversation.user_admin_fk]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Conversation.user_admin relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Conversation.user_admin lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: Conversation.user_admin will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Conversation.messages setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Conversation.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Conversation.messages synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Conversation.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Conversation.messages local/remote pairs [(conversation.id / message.conversation_fk)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Conversation.messages remote columns [message.conversation_fk]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Conversation.messages local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Conversation.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Conversation.messages lazy loading clause :param_1 = message.conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop asoc_users
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Conversation.asoc_users setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Conversation.asoc_users setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Conversation.asoc_users synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Conversation.asoc_users secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Conversation.asoc_users local/remote pairs [(conversation.id / user_conversation.conversation_id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Conversation.asoc_users remote columns [user_conversation.conversation_id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Conversation.asoc_users local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Conversation.asoc_users relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Conversation.asoc_users lazy loading clause :param_1 = user_conversation.conversation_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Conversation|conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop conversation
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation local/remote pairs [(user_conversation.conversation_id / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation local columns [user_conversation.conversation_id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: UserConversationSecondary.conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: UserConversationSecondary.user setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: UserConversationSecondary.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: UserConversationSecondary.user synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: UserConversationSecondary.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: UserConversationSecondary.user local/remote pairs [(user_conversation.user_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: UserConversationSecondary.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: UserConversationSecondary.user local columns [user_conversation.user_id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: UserConversationSecondary.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: UserConversationSecondary.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: UserConversationSecondary.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop edit_permission
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) initialize prop conversation_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop inviter
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Invite.inviter setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Invite.inviter setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Invite.inviter synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Invite.inviter secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Invite.inviter local/remote pairs [(invite.inviter_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Invite.inviter remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Invite.inviter local columns [invite.inviter_id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Invite.inviter relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Invite.inviter lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: Invite.inviter will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop invitee
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: Invite.invitee setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: Invite.invitee setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: Invite.invitee synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: Invite.invitee secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: Invite.invitee local/remote pairs [(invite.invitee_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: Invite.invitee remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: Invite.invitee local columns [invite.invitee_id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: Invite.invitee relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: Invite.invitee lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:31:37+0300: Invite.invitee will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop inviter_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop invitee_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Invite|invite) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Friends|friendship) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Friends|friendship) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Friends|friendship) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Friends|friendship) initialize prop friend_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (Friends|friendship) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop admin_convs
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.admin_convs setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.admin_convs setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.admin_convs synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.admin_convs secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.admin_convs local/remote pairs [(user.id / conversation.user_admin_fk)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.admin_convs remote columns [conversation.user_admin_fk]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.admin_convs local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.admin_convs relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.admin_convs lazy loading clause :param_1 = conversation.user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.messages setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.messages synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.messages local/remote pairs [(user.id / message.user_fk)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.messages remote columns [message.user_fk]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.messages local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.messages lazy loading clause :param_1 = message.user_fk
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop sended_invites
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.sended_invites setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.sended_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.sended_invites synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.sended_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.sended_invites local/remote pairs [(user.id / invite.inviter_id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.sended_invites remote columns [invite.inviter_id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.sended_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.sended_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.sended_invites lazy loading clause :param_1 = invite.inviter_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop received_invites
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.received_invites setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.received_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.received_invites synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.received_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.received_invites local/remote pairs [(user.id / invite.invitee_id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.received_invites remote columns [invite.invitee_id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.received_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.received_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.received_invites lazy loading clause :param_1 = invite.invitee_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop asoc_conversations
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.asoc_conversations setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.asoc_conversations setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.asoc_conversations synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.asoc_conversations secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.asoc_conversations local/remote pairs [(user.id / user_conversation.user_id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.asoc_conversations remote columns [user_conversation.user_id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.asoc_conversations local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.asoc_conversations relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.asoc_conversations lazy loading clause :param_1 = user_conversation.user_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop friends
[INFO|relationships|L2328] 2024-04-11T18:31:37+0300: User.friends setup primary join "user".id = friendship.user_id
[INFO|relationships|L2329] 2024-04-11T18:31:37+0300: User.friends setup secondary join "user".id = friendship.friend_id
[INFO|relationships|L2330] 2024-04-11T18:31:37+0300: User.friends synchronize pairs [(user.id => friendship.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:31:37+0300: User.friends secondary synchronize pairs [(user.id => friendship.friend_id)]
[INFO|relationships|L2345] 2024-04-11T18:31:37+0300: User.friends local/remote pairs [(user.id / friendship.user_id),(user.id / friendship.friend_id)]
[INFO|relationships|L2352] 2024-04-11T18:31:37+0300: User.friends remote columns [friendship.friend_id,friendship.user_id]
[INFO|relationships|L2357] 2024-04-11T18:31:37+0300: User.friends local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:31:37+0300: User.friends relationship direction RelationshipDirection.MANYTOMANY
[INFO|strategies|L734] 2024-04-11T18:31:37+0300: User.friends lazy loading clause :param_1 = friendship.user_id AND "user".id = friendship.friend_id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop email
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop is_active
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop password
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:31:37+0300: (User|user) _post_configure_properties() complete
[INFO|base|L1892] 2024-04-11T18:31:37+0300: select pg_catalog.version()
[INFO|base|L1897] 2024-04-11T18:31:37+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:31:37+0300: select current_schema()
[INFO|base|L1897] 2024-04-11T18:31:37+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:31:37+0300: show standard_conforming_strings
[INFO|base|L1897] 2024-04-11T18:31:37+0300: [raw sql] ()
[INFO|base|L1089] 2024-04-11T18:31:37+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:31:37+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:31:37+0300: [generated in 0.00036s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:31:37+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1892] 2024-04-11T18:31:37+0300: SELECT invite.status AS invite_status, invite.inviter_id AS invite_inviter_id, invite.invitee_id AS invite_invitee_id, invite.created_at AS invite_created_at, invite.updated_at AS invite_updated_at, invite.id AS invite_id 
FROM invite 
WHERE $1::UUID = invite.inviter_id
[INFO|base|L1897] 2024-04-11T18:31:37+0300: [generated in 0.00042s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[INFO|base|L1115] 2024-04-11T18:31:37+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:31:37+0300: 127.0.0.1:41504 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:31:52+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:31:52+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:31:52+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:31:52+0300: Finished server process [46425]
[DEBUG|selector_events|L54] 2024-04-11T18:31:57+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:31:58+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:31:58+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:31:58+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:31:58+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:31:58+0300: Started server process [46611]
[INFO|on|L46] 2024-04-11T18:31:58+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:31:58+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:31:58+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:32:00+0300: Request for curr user id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Message.user setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Message.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Message.user synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Message.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Message.user local/remote pairs [(message.user_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Message.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Message.user local columns [message.user_fk]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Message.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Message.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: Message.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop in_conversation
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Message.in_conversation setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Message.in_conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Message.in_conversation synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Message.in_conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Message.in_conversation local/remote pairs [(message.conversation_fk / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Message.in_conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Message.in_conversation local columns [message.conversation_fk]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Message.in_conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Message.in_conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: Message.in_conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop content
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop user_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Message|message) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop user_admin
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Conversation.user_admin setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Conversation.user_admin setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Conversation.user_admin synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Conversation.user_admin secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Conversation.user_admin local/remote pairs [(conversation.user_admin_fk / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Conversation.user_admin remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Conversation.user_admin local columns [conversation.user_admin_fk]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Conversation.user_admin relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Conversation.user_admin lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: Conversation.user_admin will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Conversation.messages setup primary join conversation.id = message.conversation_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Conversation.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Conversation.messages synchronize pairs [(conversation.id => message.conversation_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Conversation.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Conversation.messages local/remote pairs [(conversation.id / message.conversation_fk)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Conversation.messages remote columns [message.conversation_fk]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Conversation.messages local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Conversation.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Conversation.messages lazy loading clause :param_1 = message.conversation_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop asoc_users
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Conversation.asoc_users setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Conversation.asoc_users setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Conversation.asoc_users synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Conversation.asoc_users secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Conversation.asoc_users local/remote pairs [(conversation.id / user_conversation.conversation_id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Conversation.asoc_users remote columns [user_conversation.conversation_id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Conversation.asoc_users local columns [conversation.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Conversation.asoc_users relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Conversation.asoc_users lazy loading clause :param_1 = user_conversation.conversation_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Conversation|conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop conversation
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation setup primary join conversation.id = user_conversation.conversation_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation synchronize pairs [(conversation.id => user_conversation.conversation_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation local/remote pairs [(user_conversation.conversation_id / conversation.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation remote columns [conversation.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation local columns [user_conversation.conversation_id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation lazy loading clause conversation.id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: UserConversationSecondary.conversation will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop user
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: UserConversationSecondary.user setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: UserConversationSecondary.user setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: UserConversationSecondary.user synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: UserConversationSecondary.user secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: UserConversationSecondary.user local/remote pairs [(user_conversation.user_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: UserConversationSecondary.user remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: UserConversationSecondary.user local columns [user_conversation.user_id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: UserConversationSecondary.user relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: UserConversationSecondary.user lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: UserConversationSecondary.user will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop edit_permission
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) initialize prop conversation_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (UserConversationSecondary|user_conversation) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop inviter
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Invite.inviter setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Invite.inviter setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Invite.inviter synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Invite.inviter secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Invite.inviter local/remote pairs [(invite.inviter_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Invite.inviter remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Invite.inviter local columns [invite.inviter_id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Invite.inviter relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Invite.inviter lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: Invite.inviter will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop invitee
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: Invite.invitee setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: Invite.invitee setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: Invite.invitee synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: Invite.invitee secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: Invite.invitee local/remote pairs [(invite.invitee_id / user.id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: Invite.invitee remote columns [user.id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: Invite.invitee local columns [invite.invitee_id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: Invite.invitee relationship direction RelationshipDirection.MANYTOONE
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: Invite.invitee lazy loading clause "user".id = :param_1
[INFO|strategies|L760] 2024-04-11T18:32:00+0300: Invite.invitee will use Session.get() to optimize instance loads
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop status
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop inviter_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop invitee_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Invite|invite) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Friends|friendship) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Friends|friendship) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Friends|friendship) initialize prop user_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Friends|friendship) initialize prop friend_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (Friends|friendship) _post_configure_properties() complete
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) _post_configure_properties() started
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop admin_convs
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.admin_convs setup primary join "user".id = conversation.user_admin_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.admin_convs setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.admin_convs synchronize pairs [(user.id => conversation.user_admin_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.admin_convs secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.admin_convs local/remote pairs [(user.id / conversation.user_admin_fk)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.admin_convs remote columns [conversation.user_admin_fk]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.admin_convs local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.admin_convs relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.admin_convs lazy loading clause :param_1 = conversation.user_admin_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop messages
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.messages setup primary join "user".id = message.user_fk
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.messages setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.messages synchronize pairs [(user.id => message.user_fk)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.messages secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.messages local/remote pairs [(user.id / message.user_fk)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.messages remote columns [message.user_fk]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.messages local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.messages relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.messages lazy loading clause :param_1 = message.user_fk
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop sended_invites
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.sended_invites setup primary join "user".id = invite.inviter_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.sended_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.sended_invites synchronize pairs [(user.id => invite.inviter_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.sended_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.sended_invites local/remote pairs [(user.id / invite.inviter_id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.sended_invites remote columns [invite.inviter_id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.sended_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.sended_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.sended_invites lazy loading clause :param_1 = invite.inviter_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop received_invites
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.received_invites setup primary join "user".id = invite.invitee_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.received_invites setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.received_invites synchronize pairs [(user.id => invite.invitee_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.received_invites secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.received_invites local/remote pairs [(user.id / invite.invitee_id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.received_invites remote columns [invite.invitee_id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.received_invites local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.received_invites relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.received_invites lazy loading clause :param_1 = invite.invitee_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop asoc_conversations
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.asoc_conversations setup primary join "user".id = user_conversation.user_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.asoc_conversations setup secondary join None
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.asoc_conversations synchronize pairs [(user.id => user_conversation.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.asoc_conversations secondary synchronize pairs []
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.asoc_conversations local/remote pairs [(user.id / user_conversation.user_id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.asoc_conversations remote columns [user_conversation.user_id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.asoc_conversations local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.asoc_conversations relationship direction RelationshipDirection.ONETOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.asoc_conversations lazy loading clause :param_1 = user_conversation.user_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop friends
[INFO|relationships|L2328] 2024-04-11T18:32:00+0300: User.friends setup primary join "user".id = friendship.user_id
[INFO|relationships|L2329] 2024-04-11T18:32:00+0300: User.friends setup secondary join "user".id = friendship.friend_id
[INFO|relationships|L2330] 2024-04-11T18:32:00+0300: User.friends synchronize pairs [(user.id => friendship.user_id)]
[INFO|relationships|L2337] 2024-04-11T18:32:00+0300: User.friends secondary synchronize pairs [(user.id => friendship.friend_id)]
[INFO|relationships|L2345] 2024-04-11T18:32:00+0300: User.friends local/remote pairs [(user.id / friendship.user_id),(user.id / friendship.friend_id)]
[INFO|relationships|L2352] 2024-04-11T18:32:00+0300: User.friends remote columns [friendship.friend_id,friendship.user_id]
[INFO|relationships|L2357] 2024-04-11T18:32:00+0300: User.friends local columns [user.id]
[INFO|relationships|L2362] 2024-04-11T18:32:00+0300: User.friends relationship direction RelationshipDirection.MANYTOMANY
[INFO|strategies|L734] 2024-04-11T18:32:00+0300: User.friends lazy loading clause :param_1 = friendship.user_id AND "user".id = friendship.friend_id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop name
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop email
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop is_active
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop password
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop created_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop updated_at
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) initialize prop id
[INFO|mapper|L2458] 2024-04-11T18:32:00+0300: (User|user) _post_configure_properties() complete
[INFO|base|L1892] 2024-04-11T18:32:00+0300: select pg_catalog.version()
[INFO|base|L1897] 2024-04-11T18:32:00+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:32:00+0300: select current_schema()
[INFO|base|L1897] 2024-04-11T18:32:00+0300: [raw sql] ()
[INFO|base|L1892] 2024-04-11T18:32:00+0300: show standard_conforming_strings
[INFO|base|L1897] 2024-04-11T18:32:00+0300: [raw sql] ()
[INFO|base|L1089] 2024-04-11T18:32:00+0300: BEGIN (implicit)
[INFO|base|L1892] 2024-04-11T18:32:00+0300: SELECT "user".name, "user".email, "user".is_active, "user".password, "user".created_at, "user".updated_at, "user".id 
FROM "user" 
WHERE "user".id = $1::UUID
[INFO|base|L1897] 2024-04-11T18:32:00+0300: [generated in 0.00033s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[DEBUG|dependency_auth|L32] 2024-04-11T18:32:00+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|base|L1892] 2024-04-11T18:32:00+0300: SELECT invite.status AS invite_status, invite.inviter_id AS invite_inviter_id, invite.invitee_id AS invite_invitee_id, invite.created_at AS invite_created_at, invite.updated_at AS invite_updated_at, invite.id AS invite_id 
FROM invite 
WHERE $1::UUID = invite.inviter_id
[INFO|base|L1897] 2024-04-11T18:32:00+0300: [generated in 0.00055s] (UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'),)
[INFO|base|L1115] 2024-04-11T18:32:00+0300: ROLLBACK
[INFO|h11_impl|L482] 2024-04-11T18:32:00+0300: 127.0.0.1:58626 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:35:49+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:35:50+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:35:50+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:35:50+0300: Finished server process [46611]
[DEBUG|selector_events|L54] 2024-04-11T18:36:02+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:36:03+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:36:03+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:36:03+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:36:03+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:36:03+0300: Started server process [47560]
[INFO|on|L46] 2024-04-11T18:36:03+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:36:03+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:36:03+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:36:08+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:36:08+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:36:08+0300: 127.0.0.1:41364 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:37:13+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:37:13+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:37:13+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:37:13+0300: Finished server process [47560]
[DEBUG|selector_events|L54] 2024-04-11T18:37:17+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:37:18+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:37:18+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:37:18+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:37:18+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:37:18+0300: Started server process [47891]
[INFO|on|L46] 2024-04-11T18:37:18+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:37:18+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:37:18+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:37:21+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:37:21+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:37:21+0300: 127.0.0.1:55994 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:40:22+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:40:22+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:40:22+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:40:22+0300: Finished server process [47891]
[DEBUG|selector_events|L54] 2024-04-11T18:40:23+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:40:24+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:40:24+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:40:24+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:40:24+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:40:24+0300: Started server process [48544]
[INFO|on|L46] 2024-04-11T18:40:24+0300: Waiting for application startup.
[INFO|on|L60] 2024-04-11T18:40:24+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:40:24+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:40:27+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:40:27+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:40:27+0300: 127.0.0.1:36984 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[INFO|server|L265] 2024-04-11T18:41:38+0300: Shutting down
[INFO|on|L65] 2024-04-11T18:41:39+0300: Waiting for application shutdown.
[INFO|on|L76] 2024-04-11T18:41:39+0300: Application shutdown complete.
[INFO|server|L87] 2024-04-11T18:41:39+0300: Finished server process [48544]
[DEBUG|selector_events|L54] 2024-04-11T18:41:43+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:41:43+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:41:43+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:41:43+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:41:43+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:41:44+0300: Started server process [48886]
[INFO|on|L46] 2024-04-11T18:41:44+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:41:44+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:41:44+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:41:44+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:41:46+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:41:47+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:41:47+0300: 127.0.0.1:40564 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:41:47+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06497001647949219}
[INFO|server|L265] 2024-04-11T18:43:31+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:43:31+0300: Finished server process [48886]
[DEBUG|selector_events|L54] 2024-04-11T18:43:32+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:43:32+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:43:32+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:43:32+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:43:32+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:43:33+0300: Started server process [49248]
[INFO|on|L46] 2024-04-11T18:43:33+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:43:33+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:43:33+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:43:33+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:43:35+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:43:35+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:43:35+0300: 127.0.0.1:53836 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:43:35+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06551170349121094}
[INFO|server|L265] 2024-04-11T18:44:22+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:44:22+0300: Finished server process [49248]
[DEBUG|selector_events|L54] 2024-04-11T18:44:25+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:44:26+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:44:26+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:44:26+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:44:26+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:44:26+0300: Started server process [49489]
[INFO|on|L46] 2024-04-11T18:44:26+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:44:26+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:44:26+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:44:26+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:44:32+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:44:32+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:44:32+0300: 127.0.0.1:53368 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:44:32+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06180000305175781}
[INFO|server|L265] 2024-04-11T18:46:08+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:46:08+0300: Finished server process [49489]
[DEBUG|selector_events|L54] 2024-04-11T18:46:09+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:46:09+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:46:09+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:46:09+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:46:09+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:46:10+0300: Started server process [49849]
[INFO|on|L46] 2024-04-11T18:46:10+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:46:10+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:46:10+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:46:10+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:46:15+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:46:15+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:46:15+0300: 127.0.0.1:57662 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:46:15+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06383109092712402}
[INFO|server|L265] 2024-04-11T18:49:41+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:49:41+0300: Finished server process [49849]
[DEBUG|selector_events|L54] 2024-04-11T18:50:13+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:50:14+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:50:14+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:50:14+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:50:14+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:50:14+0300: Started server process [50735]
[INFO|on|L46] 2024-04-11T18:50:14+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:50:14+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:50:14+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:50:14+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:50:19+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:50:19+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:50:19+0300: 127.0.0.1:46806 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:50:19+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06728005409240723}
[INFO|server|L265] 2024-04-11T18:50:24+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:50:24+0300: Finished server process [50735]
[DEBUG|selector_events|L54] 2024-04-11T18:52:14+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:52:15+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:52:15+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:52:15+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:52:15+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:52:15+0300: Started server process [51120]
[INFO|on|L46] 2024-04-11T18:52:15+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:52:15+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:52:15+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:52:15+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:52:22+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:52:22+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:52:22+0300: 127.0.0.1:33496 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:52:22+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.058745622634887695}
[INFO|server|L265] 2024-04-11T18:58:32+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:58:32+0300: Finished server process [51120]
[DEBUG|selector_events|L54] 2024-04-11T18:58:34+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T18:58:35+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T18:58:35+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T18:58:35+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T18:58:35+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T18:58:35+0300: Started server process [52380]
[INFO|on|L46] 2024-04-11T18:58:35+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T18:58:35+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T18:58:35+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T18:58:35+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T18:58:40+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T18:58:40+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T18:58:40+0300: 127.0.0.1:38298 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T18:58:40+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.07085347175598145}
[INFO|server|L265] 2024-04-11T18:58:43+0300: Shutting down
[INFO|server|L87] 2024-04-11T18:58:43+0300: Finished server process [52380]
[DEBUG|selector_events|L54] 2024-04-11T19:00:06+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:00:07+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:00:07+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:00:07+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:00:07+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:00:07+0300: Started server process [52695]
[INFO|on|L46] 2024-04-11T19:00:07+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:00:07+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:00:07+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:00:07+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:00:12+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:00:12+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:00:12+0300: 127.0.0.1:60650 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:00:12+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.09395170211791992}
[DEBUG|dependency_auth|L42] 2024-04-11T19:00:23+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:00:23+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:00:23+0300: 127.0.0.1:45916 - "GET /api/v1/users/me HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:00:23+0300: {'protocol': 'http', 'path': '/api/v1/users/me', 'process_time': 0.007452964782714844}
[INFO|server|L265] 2024-04-11T19:05:41+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:05:42+0300: Finished server process [52695]
[DEBUG|selector_events|L54] 2024-04-11T19:05:49+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:05:50+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:05:50+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:05:50+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:05:50+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:05:50+0300: Started server process [53847]
[INFO|on|L46] 2024-04-11T19:05:50+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:05:50+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:05:50+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:05:50+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:05:51+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:05:51+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:05:51+0300: 127.0.0.1:52596 - "GET /api/v1/users/me HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:05:51+0300: {'protocol': 'http', 'path': '/api/v1/users/me', 'process_time': 0.0547482967376709}
[INFO|h11_impl|L482] 2024-04-11T19:05:57+0300: 127.0.0.1:48410 - "GET /api/v1/users/invites/receive HTTP/1.1" 404
[DEBUG|log_middleware|L17] 2024-04-11T19:05:57+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/receive', 'process_time': 0.0012814998626708984}
[DEBUG|dependency_auth|L42] 2024-04-11T19:06:02+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:06:02+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:06:02+0300: 127.0.0.1:48410 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:06:02+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.023304462432861328}
[INFO|server|L265] 2024-04-11T19:07:58+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:07:58+0300: Finished server process [53847]
[DEBUG|selector_events|L54] 2024-04-11T19:07:59+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:08:00+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:08:00+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:08:00+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:08:00+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:08:00+0300: Started server process [54368]
[INFO|on|L46] 2024-04-11T19:08:00+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:08:00+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:08:00+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:08:00+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:08:03+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:08:03+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:08:03+0300: 127.0.0.1:48092 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:08:03+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06269550323486328}
[INFO|server|L265] 2024-04-11T19:08:29+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:08:29+0300: Finished server process [54368]
[DEBUG|selector_events|L54] 2024-04-11T19:08:34+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:08:35+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:08:35+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:08:35+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:08:35+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:08:35+0300: Started server process [54518]
[INFO|on|L46] 2024-04-11T19:08:35+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:08:35+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:08:35+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:08:35+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:08:37+0300: Request for curr user id
[ERROR|dependency_auth|L53] 2024-04-11T19:08:37+0300: Non authorized user
[ERROR|dependency_auth|L53] 2024-04-11T19:08:37+0300: Non authorized user
[INFO|h11_impl|L482] 2024-04-11T19:08:37+0300: 127.0.0.1:41660 - "GET /api/v1/users/invites/received HTTP/1.1" 401
[DEBUG|log_middleware|L17] 2024-04-11T19:08:37+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.0034182071685791016}
[INFO|h11_impl|L482] 2024-04-11T19:08:46+0300: 127.0.0.1:41666 - "GET /openapi.json HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:08:46+0300: {'protocol': 'http', 'path': '/openapi.json', 'process_time': 0.01659417152404785}
[DEBUG|auth_service|L71] 2024-04-11T19:08:55+0300: access token created
[INFO|h11_impl|L482] 2024-04-11T19:08:55+0300: 127.0.0.1:41668 - "POST /api/v1/auth/refresh HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:08:55+0300: {'protocol': 'http', 'path': '/api/v1/auth/refresh', 'process_time': 0.04951620101928711}
[DEBUG|dependency_auth|L42] 2024-04-11T19:09:06+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:09:06+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:09:07+0300: 127.0.0.1:42796 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:09:07+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.030763864517211914}
[INFO|server|L265] 2024-04-11T19:12:13+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:12:13+0300: Finished server process [54518]
[DEBUG|selector_events|L54] 2024-04-11T19:12:18+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:12:18+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:12:18+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:12:18+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:12:18+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:12:19+0300: Started server process [55356]
[INFO|on|L46] 2024-04-11T19:12:19+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:12:19+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:12:19+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:12:19+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:12:22+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:12:22+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:12:22+0300: 127.0.0.1:52302 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:12:22+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.07422661781311035}
[DEBUG|dependency_auth|L42] 2024-04-11T19:23:47+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:23:47+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:23:47+0300: 127.0.0.1:58644 - "GET /api/v1/users/me HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:23:47+0300: {'protocol': 'http', 'path': '/api/v1/users/me', 'process_time': 0.011002779006958008}
[INFO|server|L265] 2024-04-11T19:24:46+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:24:46+0300: Finished server process [55356]
[DEBUG|selector_events|L54] 2024-04-11T19:24:49+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:24:50+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:24:50+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:24:50+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:24:50+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:24:50+0300: Started server process [57789]
[INFO|on|L46] 2024-04-11T19:24:50+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:24:50+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:24:50+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:24:50+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:24:57+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:24:57+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:24:57+0300: 127.0.0.1:51922 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:24:57+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.08887434005737305}
[INFO|server|L265] 2024-04-11T19:28:11+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:28:11+0300: Finished server process [57789]
[DEBUG|selector_events|L54] 2024-04-11T19:28:17+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:28:17+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:28:17+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:28:17+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:28:17+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:28:18+0300: Started server process [58507]
[INFO|on|L46] 2024-04-11T19:28:18+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:28:18+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:28:18+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:28:18+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:28:23+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:28:23+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:28:23+0300: 127.0.0.1:60804 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:28:23+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06736874580383301}
[INFO|server|L265] 2024-04-11T19:28:33+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:28:33+0300: Finished server process [58507]
[DEBUG|selector_events|L54] 2024-04-11T19:28:35+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:28:35+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:28:35+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:28:35+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:28:35+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:28:36+0300: Started server process [58607]
[INFO|on|L46] 2024-04-11T19:28:36+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:28:36+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:28:36+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:28:36+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:28:38+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:28:38+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:28:38+0300: 127.0.0.1:53392 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:28:38+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.06472635269165039}
[DEBUG|dependency_auth|L42] 2024-04-11T19:28:42+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:28:42+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:28:42+0300: 127.0.0.1:53392 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:28:42+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.00911092758178711}
[DEBUG|selector_events|L54] 2024-04-11T19:42:29+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:42:29+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:42:29+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:42:29+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:42:29+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:42:30+0300: Started server process [5327]
[INFO|on|L46] 2024-04-11T19:42:30+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:42:30+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:42:30+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:42:30+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:42:35+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:42:35+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T19:42:35+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T19:42:35+0300: 127.0.0.1:44932 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:42:35+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.050574541091918945}
[INFO|server|L265] 2024-04-11T19:43:11+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:43:11+0300: Finished server process [5327]
[DEBUG|selector_events|L54] 2024-04-11T19:43:13+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:43:14+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:43:14+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:43:14+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:43:14+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:43:14+0300: Started server process [5516]
[INFO|on|L46] 2024-04-11T19:43:14+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:43:14+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:43:14+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:43:14+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:43:17+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:43:17+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T19:43:17+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T19:43:17+0300: 127.0.0.1:57794 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:43:17+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.0542910099029541}
[INFO|server|L265] 2024-04-11T19:43:45+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:43:45+0300: Finished server process [5516]
[DEBUG|selector_events|L54] 2024-04-11T19:43:46+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:43:46+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:43:46+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:43:46+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:43:46+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:43:47+0300: Started server process [5699]
[INFO|on|L46] 2024-04-11T19:43:47+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:43:47+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:43:47+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:43:47+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:43:49+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:43:49+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T19:43:49+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T19:43:49+0300: 127.0.0.1:50752 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:43:49+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.057520389556884766}
[INFO|server|L265] 2024-04-11T19:45:51+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:45:51+0300: Finished server process [5699]
[DEBUG|selector_events|L54] 2024-04-11T19:45:54+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:45:54+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:45:54+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:45:54+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:45:54+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:45:55+0300: Started server process [6236]
[INFO|on|L46] 2024-04-11T19:45:55+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:45:55+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:45:55+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:45:55+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:46:01+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:46:01+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:46:01+0300: 127.0.0.1:45446 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T19:46:01+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T19:46:01+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T19:48:00+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:48:00+0300: Finished server process [6236]
[DEBUG|selector_events|L54] 2024-04-11T19:48:01+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:48:02+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:48:02+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:48:02+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:48:02+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:48:02+0300: Started server process [6732]
[INFO|on|L46] 2024-04-11T19:48:02+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:48:02+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:48:02+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:48:02+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:48:04+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:48:04+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:48:04+0300: 127.0.0.1:56610 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T19:48:04+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.06812763214111328}
[INFO|server|L265] 2024-04-11T19:51:41+0300: Shutting down
[INFO|server|L87] 2024-04-11T19:51:41+0300: Finished server process [6732]
[DEBUG|selector_events|L54] 2024-04-11T19:51:52+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T19:51:52+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T19:51:52+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T19:51:52+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T19:51:52+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T19:51:53+0300: Started server process [7518]
[INFO|on|L46] 2024-04-11T19:51:53+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T19:51:53+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T19:51:53+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T19:51:53+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T19:51:54+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T19:51:54+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T19:51:54+0300: 127.0.0.1:42936 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T19:51:54+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T19:51:54+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[DEBUG|dependency_auth|L42] 2024-04-11T20:00:22+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:00:22+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:00:22+0300: 127.0.0.1:56132 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:00:22+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T20:00:22+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T20:00:25+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:00:25+0300: Finished server process [7518]
[DEBUG|selector_events|L54] 2024-04-11T20:00:26+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:00:27+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:00:27+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:00:27+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:00:27+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:00:27+0300: Started server process [9208]
[INFO|on|L46] 2024-04-11T20:00:27+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:00:27+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:00:27+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:00:27+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:00:30+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:00:30+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:00:30+0300: 127.0.0.1:55790 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:00:30+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 1493, in __getattr__
    return getattr(self.comparator, key)
AttributeError: 'Comparator' object has no attribute 'id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/properties.py", line 473, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 1495, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 114, in get_all_sended_invites
    return await friends_service.get_sended_invites(curr_user=user)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in get_sended_invites
    return await self.user_repo.get_sended_invites(user = curr_user)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 103, in get_sended_invites
    .where(Invite.inviter_id.id == user.id)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Invite.inviter_id has an attribute 'id'
[ERROR|h11_impl|L417] 2024-04-11T20:00:30+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 1493, in __getattr__
    return getattr(self.comparator, key)
AttributeError: 'Comparator' object has no attribute 'id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/properties.py", line 473, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 1495, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 114, in get_all_sended_invites
    return await friends_service.get_sended_invites(curr_user=user)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in get_sended_invites
    return await self.user_repo.get_sended_invites(user = curr_user)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 103, in get_sended_invites
    .where(Invite.inviter_id.id == user.id)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Invite.inviter_id has an attribute 'id'
[INFO|server|L265] 2024-04-11T20:00:41+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:00:41+0300: Finished server process [9208]
[DEBUG|selector_events|L54] 2024-04-11T20:00:43+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:00:44+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:00:44+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:00:44+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:00:44+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:00:44+0300: Started server process [9281]
[INFO|on|L46] 2024-04-11T20:00:44+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:00:44+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:00:44+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:00:44+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:00:47+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:00:47+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:00:47+0300: 127.0.0.1:57038 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:00:47+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T20:00:47+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T20:06:13+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:06:14+0300: Finished server process [9281]
[DEBUG|selector_events|L54] 2024-04-11T20:06:14+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:06:15+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:06:15+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:06:15+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:06:15+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:06:15+0300: Started server process [10413]
[INFO|on|L46] 2024-04-11T20:06:15+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:06:15+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:06:15+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:06:15+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:06:17+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:06:17+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:06:17+0300: 127.0.0.1:56028 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:06:17+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T20:06:17+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T20:08:41+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:08:42+0300: Finished server process [10413]
[DEBUG|selector_events|L54] 2024-04-11T20:08:43+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:08:43+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:08:43+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:08:43+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:08:43+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:08:43+0300: Started server process [10893]
[INFO|on|L46] 2024-04-11T20:08:43+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:08:43+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:08:43+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:08:43+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:08:46+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:08:46+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:08:46+0300: 127.0.0.1:41678 - "GET /api/v1/users/invites/sended HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:08:46+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T20:08:46+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T20:12:43+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:12:43+0300: Finished server process [10893]
[DEBUG|selector_events|L54] 2024-04-11T20:12:44+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:12:44+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:12:44+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:12:44+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:12:44+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:12:45+0300: Started server process [11731]
[INFO|on|L46] 2024-04-11T20:12:45+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:12:45+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:12:45+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:12:45+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:12:48+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:12:48+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:12:48+0300: 127.0.0.1:45638 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:12:48+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.059766292572021484}
[INFO|server|L265] 2024-04-11T20:23:25+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:23:25+0300: Finished server process [11731]
[DEBUG|selector_events|L54] 2024-04-11T20:23:25+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:23:26+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:23:26+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:23:26+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:23:26+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:23:26+0300: Started server process [14438]
[INFO|on|L46] 2024-04-11T20:23:26+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:23:26+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:23:26+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:23:26+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:23:32+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:23:32+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:23:32+0300: 127.0.0.1:48742 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:23:32+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.06994819641113281}
[INFO|server|L265] 2024-04-11T20:23:43+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:23:43+0300: Finished server process [14438]
[DEBUG|selector_events|L54] 2024-04-11T20:23:44+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:23:44+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:23:44+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:23:44+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:23:44+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:23:45+0300: Started server process [14531]
[INFO|on|L46] 2024-04-11T20:23:45+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:23:45+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:23:45+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:23:45+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:23:47+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:23:47+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:23:47+0300: 127.0.0.1:54906 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:23:47+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.06295394897460938}
[INFO|server|L265] 2024-04-11T20:23:54+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:23:55+0300: Finished server process [14531]
[DEBUG|selector_events|L54] 2024-04-11T20:23:57+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:23:57+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:23:57+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:23:57+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:23:57+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:23:57+0300: Started server process [14600]
[INFO|on|L46] 2024-04-11T20:23:57+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:23:57+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:23:57+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:23:57+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:24:00+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:24:00+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:24:00+0300: 127.0.0.1:39836 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:24:00+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.060248613357543945}
[DEBUG|dependency_auth|L42] 2024-04-11T20:38:15+0300: Request for curr user id
[ERROR|dependency_auth|L53] 2024-04-11T20:38:15+0300: Non authorized user
[ERROR|dependency_auth|L53] 2024-04-11T20:38:15+0300: Non authorized user
[INFO|h11_impl|L482] 2024-04-11T20:38:15+0300: 127.0.0.1:34910 - "GET /api/v1/users/invites/sended HTTP/1.1" 401
[DEBUG|log_middleware|L17] 2024-04-11T20:38:15+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.003206968307495117}
[DEBUG|auth_service|L71] 2024-04-11T20:38:39+0300: access token created
[INFO|h11_impl|L482] 2024-04-11T20:38:39+0300: 127.0.0.1:58132 - "POST /api/v1/auth/refresh HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:38:39+0300: {'protocol': 'http', 'path': '/api/v1/auth/refresh', 'process_time': 0.006287574768066406}
[DEBUG|dependency_auth|L42] 2024-04-11T20:38:52+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:38:52+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:38:52+0300: 127.0.0.1:32914 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:38:52+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.009083986282348633}
[DEBUG|dependency_auth|L42] 2024-04-11T20:38:59+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:38:59+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T20:38:59+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T20:38:59+0300: 127.0.0.1:32920 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:38:59+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.010077953338623047}
[DEBUG|dependency_auth|L42] 2024-04-11T20:49:48+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:49:48+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T20:49:48+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T20:49:48+0300: 127.0.0.1:48888 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:49:48+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.009935617446899414}
[DEBUG|dependency_auth|L42] 2024-04-11T20:49:52+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:49:52+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T20:49:52+0300: 127.0.0.1:48888 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:49:52+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.009190559387207031}
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[0:10]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[12:20]
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_data with data[21:27]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[28:36]
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_data with data[37:43]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[44:49]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[51:60]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T20:50:02+0300: Calling on_field_name with data[62:75]
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T20:50:02+0300: Calling on_end with no data
[DEBUG|auth_service|L34] 2024-04-11T20:50:02+0300: request for token creating
[DEBUG|security|L20] 2024-04-11T20:50:02+0300: password verifying
[WARNING|bcrypt|L622] 2024-04-11T20:50:02+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[WARNING|bcrypt|L622] 2024-04-11T20:50:02+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[DEBUG|bcrypt|L625] 2024-04-11T20:50:02+0300: detected 'bcrypt' backend, version '<unknown>'
[DEBUG|bcrypt|L406] 2024-04-11T20:50:02+0300: 'bcrypt' backend lacks $2$ support, enabling workaround
[DEBUG|auth_service|L71] 2024-04-11T20:50:02+0300: access token created
[DEBUG|auth_service|L76] 2024-04-11T20:50:02+0300: refresh token created
[INFO|h11_impl|L482] 2024-04-11T20:50:02+0300: 127.0.0.1:58884 - "POST /api/v1/auth/token HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:50:02+0300: {'protocol': 'http', 'path': '/api/v1/auth/token', 'process_time': 0.24711132049560547}
[DEBUG|dependency_auth|L42] 2024-04-11T20:50:10+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:50:10+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T20:50:10+0300: 127.0.0.1:57384 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:50:10+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.010159015655517578}
[DEBUG|dependency_auth|L42] 2024-04-11T20:50:14+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:50:14+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L96] 2024-04-11T20:50:14+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T20:50:14+0300: 127.0.0.1:57384 - "GET /api/v1/users/invites/received HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:50:14+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'inviter'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T20:50:14+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'inviter'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a987703d-54e1-4a99-b956-62d27375e8a8, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T20:51:27+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:51:27+0300: Finished server process [14600]
[DEBUG|selector_events|L54] 2024-04-11T20:51:27+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:51:28+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:51:28+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:51:28+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:51:28+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:51:28+0300: Started server process [19942]
[INFO|on|L46] 2024-04-11T20:51:28+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:51:28+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:51:28+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:51:28+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T20:51:32+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:51:32+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L96] 2024-04-11T20:51:32+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T20:51:32+0300: 127.0.0.1:55248 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:51:32+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.0645303726196289}
[DEBUG|dependency_auth|L42] 2024-04-11T20:51:46+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:51:46+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T20:51:46+0300: 127.0.0.1:48280 - "GET /api/v1/users/invites/sended HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:51:46+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/sended', 'process_time': 0.00943446159362793}
[DEBUG|dependency_auth|L42] 2024-04-11T20:51:52+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:51:52+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L96] 2024-04-11T20:51:52+0300: sosi zhopu
[INFO|h11_impl|L482] 2024-04-11T20:51:52+0300: 127.0.0.1:48306 - "GET /api/v1/users/invites/received HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T20:51:52+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/received', 'process_time': 0.008658885955810547}
[INFO|h11_impl|L482] 2024-04-11T20:52:05+0300: 127.0.0.1:43280 - "GET /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T20:52:05+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0008707046508789062}
[INFO|h11_impl|L482] 2024-04-11T20:52:05+0300: 127.0.0.1:43280 - "GET /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 405
[DEBUG|log_middleware|L17] 2024-04-11T20:52:05+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8', 'process_time': 0.0009028911590576172}
[INFO|h11_impl|L482] 2024-04-11T20:52:10+0300: 127.0.0.1:43280 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T20:52:10+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0007061958312988281}
[DEBUG|dependency_auth|L42] 2024-04-11T20:52:10+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:52:10+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T20:52:10+0300: 127.0.0.1:43280 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:52:10+0300: Exception in ASGI application
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/uuid.pyx", line 20, in asyncpg.pgproto.pgproto.uuid_encode
AttributeError: 'builtin_function_or_method' object has no attribute 'bytes'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 64, in accept_invite
    invite = await self.invite_repo.get(id=id)
  File "/home/vanya/fastProject/src/crud/repo_abstract.py", line 50, in get
    res = await get_object(
  File "/home/vanya/fastProject/src/crud/utils.py", line 27, in get_object
    obj = await async_session.scalar(stmt)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 508, in scalar
    return await greenlet_spawn(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2354, in scalar
    return self._execute_internal(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')
[SQL: SELECT invite.status, invite.inviter_id, invite.invitee_id, invite.created_at, invite.updated_at, invite.id 
FROM invite 
WHERE invite.id = $1::UUID]
[parameters: (<built-in function id>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[ERROR|h11_impl|L417] 2024-04-11T20:52:10+0300: Exception in ASGI application
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/uuid.pyx", line 20, in asyncpg.pgproto.pgproto.uuid_encode
AttributeError: 'builtin_function_or_method' object has no attribute 'bytes'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 64, in accept_invite
    invite = await self.invite_repo.get(id=id)
  File "/home/vanya/fastProject/src/crud/repo_abstract.py", line 50, in get
    res = await get_object(
  File "/home/vanya/fastProject/src/crud/utils.py", line 27, in get_object
    obj = await async_session.scalar(stmt)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 508, in scalar
    return await greenlet_spawn(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2354, in scalar
    return self._execute_internal(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <built-in function id> ('builtin_function_or_method' object has no attribute 'bytes')
[SQL: SELECT invite.status, invite.inviter_id, invite.invitee_id, invite.created_at, invite.updated_at, invite.id 
FROM invite 
WHERE invite.id = $1::UUID]
[parameters: (<built-in function id>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[INFO|server|L265] 2024-04-11T20:58:33+0300: Shutting down
[INFO|server|L87] 2024-04-11T20:58:33+0300: Finished server process [19942]
[DEBUG|selector_events|L54] 2024-04-11T20:58:34+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T20:58:34+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T20:58:34+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T20:58:34+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T20:58:34+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T20:58:35+0300: Started server process [21560]
[INFO|on|L46] 2024-04-11T20:58:35+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T20:58:35+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T20:58:35+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T20:58:35+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T20:58:36+0300: 127.0.0.1:45164 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T20:58:36+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0009999275207519531}
[DEBUG|dependency_auth|L42] 2024-04-11T20:58:36+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T20:58:36+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L76] 2024-04-11T20:58:36+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') accepted invite invite_id=UUID('a987703d-54e1-4a99-b956-62d27375e8a8')
[INFO|h11_impl|L482] 2024-04-11T20:58:36+0300: 127.0.0.1:45164 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T20:58:36+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 78, in accept_invite
    return await self.user_repo.add_friend(curr_user, id=invite.iviter_id)
AttributeError: 'Invite' object has no attribute 'iviter_id'. Did you mean: 'inviter_id'?
[ERROR|h11_impl|L417] 2024-04-11T20:58:36+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 78, in accept_invite
    return await self.user_repo.add_friend(curr_user, id=invite.iviter_id)
AttributeError: 'Invite' object has no attribute 'iviter_id'. Did you mean: 'inviter_id'?
[INFO|server|L265] 2024-04-11T21:04:13+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:04:13+0300: Finished server process [21560]
[DEBUG|selector_events|L54] 2024-04-11T21:04:15+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:04:15+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:04:15+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:04:15+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:04:15+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:04:16+0300: Started server process [22701]
[INFO|on|L46] 2024-04-11T21:04:16+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:04:16+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:04:16+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:04:16+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T21:04:19+0300: 127.0.0.1:47652 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T21:04:19+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0011801719665527344}
[DEBUG|dependency_auth|L42] 2024-04-11T21:04:19+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:04:19+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L76] 2024-04-11T21:04:19+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') accepted invite invite_id=UUID('a987703d-54e1-4a99-b956-62d27375e8a8')
[DEBUG|friends_service|L79] 2024-04-11T21:04:19+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') added in friend invitee_id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T21:04:19+0300: 127.0.0.1:47652 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:04:19+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'status'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'inviter'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'invitee'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}

[ERROR|h11_impl|L417] 2024-04-11T21:04:19+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'status'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'inviter'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'invitee'), 'msg': 'Field required', 'input': User: User, Id: 4c1a3151-7378-424b-85a2-5ff6f357b7df, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}

[INFO|server|L265] 2024-04-11T21:05:16+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:05:16+0300: Finished server process [22701]
[DEBUG|selector_events|L54] 2024-04-11T21:05:16+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:05:17+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:05:17+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:05:17+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:05:17+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:05:17+0300: Started server process [22988]
[INFO|on|L46] 2024-04-11T21:05:17+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:05:17+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:05:17+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:05:17+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T21:05:20+0300: 127.0.0.1:53570 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T21:05:20+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0011451244354248047}
[DEBUG|dependency_auth|L42] 2024-04-11T21:05:20+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:05:20+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L76] 2024-04-11T21:05:20+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') accepted invite invite_id=UUID('a987703d-54e1-4a99-b956-62d27375e8a8')
[INFO|h11_impl|L482] 2024-04-11T21:05:20+0300: 127.0.0.1:53570 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:05:20+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 78, in accept_invite
    friend = await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 45, in add_friend
    friend = await self.is_valid_friend_for_add(user, **criteries)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 75, in is_valid_friend_for_add
    raise AlreadyFriendException
src.crud.exceptions.AlreadyFriendException: User already in friends
[ERROR|h11_impl|L417] 2024-04-11T21:05:20+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 78, in accept_invite
    friend = await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 45, in add_friend
    friend = await self.is_valid_friend_for_add(user, **criteries)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 75, in is_valid_friend_for_add
    raise AlreadyFriendException
src.crud.exceptions.AlreadyFriendException: User already in friends
[INFO|h11_impl|L482] 2024-04-11T21:06:04+0300: 127.0.0.1:38042 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T21:06:04+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8/', 'process_time': 0.0006771087646484375}
[DEBUG|dependency_auth|L42] 2024-04-11T21:06:04+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:06:04+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L76] 2024-04-11T21:06:04+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') accepted invite invite_id=UUID('a987703d-54e1-4a99-b956-62d27375e8a8')
[DEBUG|friends_service|L79] 2024-04-11T21:06:04+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') added in friend invitee_id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T21:06:04+0300: 127.0.0.1:38042 - "POST /api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:06:04+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/a987703d-54e1-4a99-b956-62d27375e8a8', 'process_time': 0.023418664932250977}
[DEBUG|dependency_auth|L42] 2024-04-11T21:06:20+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:06:20+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:06:20+0300: 127.0.0.1:40894 - "POST /api/v1/users/friends HTTP/1.1" 400
[DEBUG|log_middleware|L17] 2024-04-11T21:06:20+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.00805974006652832}
[INFO|h11_impl|L482] 2024-04-11T21:06:46+0300: 127.0.0.1:60054 - "GET /api/v1/users/friends HTTP/1.1" 405
[DEBUG|log_middleware|L17] 2024-04-11T21:06:46+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.001153707504272461}
[INFO|server|L265] 2024-04-11T21:08:53+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:08:53+0300: Finished server process [22988]
[DEBUG|selector_events|L54] 2024-04-11T21:08:54+0300: Using selector: EpollSelector
[DEBUG|selector_events|L54] 2024-04-11T21:09:03+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:09:03+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:09:03+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:09:03+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:09:03+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:09:03+0300: Started server process [23992]
[INFO|on|L46] 2024-04-11T21:09:03+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:09:03+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:09:03+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:09:03+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T21:09:06+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:09:06+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:09:06+0300: 127.0.0.1:58642 - "GET /api/v1/users/friends HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:09:06+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 142, in get_friends_list
    return await friends_service.get_all_friends(user=user)
TypeError: FriendsService.get_all_friends() got an unexpected keyword argument 'user'
[ERROR|h11_impl|L417] 2024-04-11T21:09:06+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 142, in get_friends_list
    return await friends_service.get_all_friends(user=user)
TypeError: FriendsService.get_all_friends() got an unexpected keyword argument 'user'
[INFO|server|L265] 2024-04-11T21:09:24+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:09:24+0300: Finished server process [23992]
[DEBUG|selector_events|L54] 2024-04-11T21:09:24+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:09:25+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:09:25+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:09:25+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:09:25+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:09:25+0300: Started server process [24102]
[INFO|on|L46] 2024-04-11T21:09:25+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:09:25+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:09:25+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:09:25+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T21:09:28+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:09:28+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:09:28+0300: 127.0.0.1:37556 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:09:28+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.06981372833251953}
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[0:10]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[12:20]
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_data with data[21:27]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[28:36]
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_data with data[37:43]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[44:49]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[51:60]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T21:26:49+0300: Calling on_field_name with data[62:75]
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T21:26:49+0300: Calling on_end with no data
[DEBUG|auth_service|L34] 2024-04-11T21:26:49+0300: request for token creating
[DEBUG|security|L20] 2024-04-11T21:26:49+0300: password verifying
[WARNING|bcrypt|L622] 2024-04-11T21:26:49+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[WARNING|bcrypt|L622] 2024-04-11T21:26:49+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[DEBUG|bcrypt|L625] 2024-04-11T21:26:49+0300: detected 'bcrypt' backend, version '<unknown>'
[DEBUG|bcrypt|L406] 2024-04-11T21:26:49+0300: 'bcrypt' backend lacks $2$ support, enabling workaround
[DEBUG|auth_service|L71] 2024-04-11T21:26:50+0300: access token created
[DEBUG|auth_service|L76] 2024-04-11T21:26:50+0300: refresh token created
[INFO|h11_impl|L482] 2024-04-11T21:26:50+0300: 127.0.0.1:48298 - "POST /api/v1/auth/token HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:26:50+0300: {'protocol': 'http', 'path': '/api/v1/auth/token', 'process_time': 0.2470555305480957}
[DEBUG|dependency_auth|L42] 2024-04-11T21:27:01+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:27:01+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:27:01+0300: 127.0.0.1:54472 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:27:01+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.009172916412353516}
[DEBUG|dependency_auth|L42] 2024-04-11T21:27:34+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:27:34+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:27:34+0300: 127.0.0.1:34032 - "POST /api/v1/users/friends?id=4c1a3151-7378-424b-85a2-5ff6f357b7df HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:27:34+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_friend(user=user, id=id, name=name)
AttributeError: 'FriendsService' object has no attribute 'remove_friend'
[ERROR|h11_impl|L417] 2024-04-11T21:27:34+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_friend(user=user, id=id, name=name)
AttributeError: 'FriendsService' object has no attribute 'remove_friend'
[DEBUG|dependency_auth|L42] 2024-04-11T21:28:14+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:28:14+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:28:14+0300: 127.0.0.1:41446 - "POST /api/v1/users/friends?id=4c1a3151-7378-424b-85a2-5ff6f357b7df HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:28:14+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
AttributeError: 'FriendsService' object has no attribute 'remove_friend'
[ERROR|h11_impl|L417] 2024-04-11T21:28:14+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
AttributeError: 'FriendsService' object has no attribute 'remove_friend'
[INFO|server|L265] 2024-04-11T21:28:17+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:28:17+0300: Finished server process [24102]
[DEBUG|selector_events|L54] 2024-04-11T21:28:18+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:28:18+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:28:18+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:28:18+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:28:19+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:28:19+0300: Started server process [27637]
[INFO|on|L46] 2024-04-11T21:28:19+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:28:19+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:28:19+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:28:19+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T21:28:24+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:28:24+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:28:24+0300: 127.0.0.1:35500 - "POST /api/v1/users/friends?id=4c1a3151-7378-424b-85a2-5ff6f357b7df HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T21:28:24+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
TypeError: FriendsService.remove_from_friends() missing 1 required positional argument: 'curr_user'
[ERROR|h11_impl|L417] 2024-04-11T21:28:24+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
TypeError: FriendsService.remove_from_friends() missing 1 required positional argument: 'curr_user'
[INFO|server|L265] 2024-04-11T21:28:44+0300: Shutting down
[INFO|server|L87] 2024-04-11T21:28:44+0300: Finished server process [27637]
[DEBUG|selector_events|L54] 2024-04-11T21:28:45+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T21:28:45+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T21:28:45+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T21:28:45+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T21:28:45+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T21:28:45+0300: Started server process [27795]
[INFO|on|L46] 2024-04-11T21:28:45+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T21:28:45+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T21:28:45+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T21:28:45+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T21:28:47+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:28:47+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:28:47+0300: 127.0.0.1:40538 - "POST /api/v1/users/friends?id=4c1a3151-7378-424b-85a2-5ff6f357b7df HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:28:47+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.08155488967895508}
[DEBUG|dependency_auth|L42] 2024-04-11T21:28:53+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:28:53+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:28:53+0300: 127.0.0.1:52742 - "POST /api/v1/users/friends HTTP/1.1" 400
[DEBUG|log_middleware|L17] 2024-04-11T21:28:53+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.007031917572021484}
[DEBUG|dependency_auth|L42] 2024-04-11T21:28:59+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T21:28:59+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T21:28:59+0300: 127.0.0.1:52746 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T21:28:59+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.007368326187133789}
[DEBUG|dependency_auth|L42] 2024-04-11T22:03:01+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:03:01+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:03:01+0300: 127.0.0.1:52258 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:03:01+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.008521556854248047}
[INFO|server|L265] 2024-04-11T22:05:53+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:05:53+0300: Finished server process [27795]
[DEBUG|selector_events|L54] 2024-04-11T22:06:13+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:06:14+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:06:14+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:06:14+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:06:14+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:06:14+0300: Started server process [35776]
[INFO|on|L46] 2024-04-11T22:06:14+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:06:14+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:06:14+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:06:14+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:06:15+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:06:15+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:06:15+0300: 127.0.0.1:38498 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:06:15+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 46, in create_invite
    schema = InviteToDB(inviter_id=user.id, invitee_id=invitee_id)
NameError: name 'invitee_id' is not defined
[ERROR|h11_impl|L417] 2024-04-11T22:06:15+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 46, in create_invite
    schema = InviteToDB(inviter_id=user.id, invitee_id=invitee_id)
NameError: name 'invitee_id' is not defined
[DEBUG|dependency_auth|L42] 2024-04-11T22:07:03+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:07:03+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:07:03+0300: 127.0.0.1:60852 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:07:03+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 46, in create_invite
    schema = InviteToDB(inviter_id=user.id, invitee_id=friend.id)
NameError: name 'invitee_id' is not defined
[ERROR|h11_impl|L417] 2024-04-11T22:07:03+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 46, in create_invite
    schema = InviteToDB(inviter_id=user.id, invitee_id=friend.id)
NameError: name 'invitee_id' is not defined
[INFO|server|L265] 2024-04-11T22:07:06+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:07:06+0300: Finished server process [35776]
[DEBUG|selector_events|L54] 2024-04-11T22:07:06+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:07:07+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:07:07+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:07:07+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:07:07+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:07:07+0300: Started server process [36024]
[INFO|on|L46] 2024-04-11T22:07:07+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:07:07+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:07:07+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:07:07+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:07:09+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:07:09+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:07:09+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:07:09+0300: 127.0.0.1:60858 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:07:09+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 55, in create_invite
    return await self.construct_invite_response(invite=new_invite)
AttributeError: 'FriendsService' object has no attribute 'construct_invite_response'
[ERROR|h11_impl|L417] 2024-04-11T22:07:09+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 55, in create_invite
    return await self.construct_invite_response(invite=new_invite)
AttributeError: 'FriendsService' object has no attribute 'construct_invite_response'
[INFO|server|L265] 2024-04-11T22:26:11+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:26:11+0300: Finished server process [36024]
[DEBUG|selector_events|L54] 2024-04-11T22:26:12+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:26:12+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:26:12+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:26:12+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:26:12+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:26:13+0300: Started server process [39938]
[INFO|on|L46] 2024-04-11T22:26:13+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:26:13+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:26:13+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:26:13+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:26:15+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:26:15+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:26:15+0300: 127.0.0.1:60778 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:26:15+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/src/services/friends_service.py", line 48, in create_invite
    new_invite = await self.invite_repo.create(schema.model_dump())
  File "/home/vanya/fastProject/src/crud/repo_abstract.py", line 46, in create
    await self._session.commit()  #     
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.
[SQL: INSERT INTO invite (status, inviter_id, invitee_id, id) VALUES ($1::statusenum, $2::UUID, $3::UUID, $4::UUID) RETURNING invite.created_at, invite.updated_at]
[parameters: ('PENDING', UUID('904e2189-f066-47ab-a270-4cad2119aeb8'), UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'), UUID('2a3a477e-04fa-4ef6-94d2-2c9b3b7ff51e'))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 52, in create_invite
    log.error(f"Unique constraint error occured {user.id=} and {friend.id=}")
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 1653, in load_scalar_attributes
    result = load_on_ident(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2181, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2050, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.
[SQL: INSERT INTO invite (status, inviter_id, invitee_id, id) VALUES ($1::statusenum, $2::UUID, $3::UUID, $4::UUID) RETURNING invite.created_at, invite.updated_at]
[parameters: ('PENDING', UUID('904e2189-f066-47ab-a270-4cad2119aeb8'), UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'), UUID('2a3a477e-04fa-4ef6-94d2-2c9b3b7ff51e'))]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[ERROR|h11_impl|L417] 2024-04-11T22:26:15+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/src/services/friends_service.py", line 48, in create_invite
    new_invite = await self.invite_repo.create(schema.model_dump())
  File "/home/vanya/fastProject/src/crud/repo_abstract.py", line 46, in create
    await self._session.commit()  #     
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.
[SQL: INSERT INTO invite (status, inviter_id, invitee_id, id) VALUES ($1::statusenum, $2::UUID, $3::UUID, $4::UUID) RETURNING invite.created_at, invite.updated_at]
[parameters: ('PENDING', UUID('904e2189-f066-47ab-a270-4cad2119aeb8'), UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'), UUID('2a3a477e-04fa-4ef6-94d2-2c9b3b7ff51e'))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 125, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 52, in create_invite
    log.error(f"Unique constraint error occured {user.id=} and {friend.id=}")
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 1653, in load_scalar_attributes
    result = load_on_ident(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2181, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2050, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 928, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "unique_invite_pair"
DETAIL:  Key (inviter_id, invitee_id)=(904e2189-f066-47ab-a270-4cad2119aeb8, 4c1a3151-7378-424b-85a2-5ff6f357b7df) already exists.
[SQL: INSERT INTO invite (status, inviter_id, invitee_id, id) VALUES ($1::statusenum, $2::UUID, $3::UUID, $4::UUID) RETURNING invite.created_at, invite.updated_at]
[parameters: ('PENDING', UUID('904e2189-f066-47ab-a270-4cad2119aeb8'), UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df'), UUID('2a3a477e-04fa-4ef6-94d2-2c9b3b7ff51e'))]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
[INFO|server|L265] 2024-04-11T22:43:46+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:43:46+0300: Finished server process [39938]
[DEBUG|selector_events|L54] 2024-04-11T22:44:38+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:44:38+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:44:38+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:44:38+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:44:38+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:44:39+0300: Started server process [43369]
[INFO|on|L46] 2024-04-11T22:44:39+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:44:39+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:44:39+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:44:39+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:44:42+0300: Request for curr user id
[ERROR|dependency_auth|L53] 2024-04-11T22:44:42+0300: Non authorized user
[ERROR|dependency_auth|L53] 2024-04-11T22:44:42+0300: Non authorized user
[INFO|h11_impl|L482] 2024-04-11T22:44:42+0300: 127.0.0.1:52476 - "POST /api/v1/users/invites?name=User HTTP/1.1" 401
[DEBUG|log_middleware|L17] 2024-04-11T22:44:42+0300: {'protocol': 'http', 'path': '/api/v1/users/invites', 'process_time': 0.0031065940856933594}
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[0:10]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[12:20]
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_data with data[21:27]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[28:36]
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_data with data[37:43]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[44:49]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[51:60]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:44:53+0300: Calling on_field_name with data[62:75]
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:44:53+0300: Calling on_end with no data
[DEBUG|auth_service|L34] 2024-04-11T22:44:53+0300: request for token creating
[DEBUG|security|L20] 2024-04-11T22:44:53+0300: password verifying
[WARNING|bcrypt|L622] 2024-04-11T22:44:53+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[WARNING|bcrypt|L622] 2024-04-11T22:44:53+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[DEBUG|bcrypt|L625] 2024-04-11T22:44:53+0300: detected 'bcrypt' backend, version '<unknown>'
[DEBUG|bcrypt|L406] 2024-04-11T22:44:53+0300: 'bcrypt' backend lacks $2$ support, enabling workaround
[DEBUG|auth_service|L71] 2024-04-11T22:44:53+0300: access token created
[DEBUG|auth_service|L76] 2024-04-11T22:44:53+0300: refresh token created
[INFO|h11_impl|L482] 2024-04-11T22:44:53+0300: 127.0.0.1:34734 - "POST /api/v1/auth/token HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:44:53+0300: {'protocol': 'http', 'path': '/api/v1/auth/token', 'process_time': 0.28446030616760254}
[DEBUG|dependency_auth|L42] 2024-04-11T22:45:02+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:45:02+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:45:02+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:45:02+0300: 127.0.0.1:54282 - "POST /api/v1/users/invites?name=User HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:45:02+0300: {'protocol': 'http', 'path': '/api/v1/users/invites', 'process_time': 0.03152751922607422}
[DEBUG|dependency_auth|L42] 2024-04-11T22:46:50+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:46:50+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:46:50+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:46:50+0300: 127.0.0.1:40388 - "POST /api/v1/users/invites?name=User HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:46:50+0300: {'protocol': 'http', 'path': '/api/v1/users/invites', 'process_time': 0.018892288208007812}
[INFO|server|L265] 2024-04-11T22:46:58+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:46:58+0300: Finished server process [43369]
[DEBUG|selector_events|L54] 2024-04-11T22:47:00+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:47:01+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:47:01+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:47:01+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:47:01+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:47:01+0300: Started server process [43909]
[INFO|on|L46] 2024-04-11T22:47:01+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:47:01+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:47:01+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:47:01+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:47:03+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:47:03+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:47:03+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:47:03+0300: 127.0.0.1:47838 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:47:03+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a840ea07-82b6-44e6-8c3e-550478b24fad, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T22:47:03+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: a840ea07-82b6-44e6-8c3e-550478b24fad, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T22:47:40+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:47:40+0300: Finished server process [43909]
[DEBUG|selector_events|L54] 2024-04-11T22:47:41+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:47:42+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:47:42+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:47:42+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:47:42+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:47:42+0300: Started server process [44091]
[INFO|on|L46] 2024-04-11T22:47:42+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:47:42+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:47:42+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:47:42+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:47:46+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:47:46+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:47:46+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:47:46+0300: 127.0.0.1:51198 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:47:46+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: 99ffcc9f-89e6-432f-9d56-715d41723761, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[ERROR|h11_impl|L417] 2024-04-11T22:47:46+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'get_attribute_error', 'loc': ('response', 'invitee'), 'msg': "Error extracting attribute: MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)", 'input': Invite: 99ffcc9f-89e6-432f-9d56-715d41723761, 'ctx': {'error': "MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)"}, 'url': 'https://errors.pydantic.dev/2.6/v/get_attribute_error'}

[INFO|server|L265] 2024-04-11T22:47:55+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:47:55+0300: Finished server process [44091]
[DEBUG|selector_events|L54] 2024-04-11T22:47:57+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:47:57+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:47:57+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:47:57+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:47:57+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:47:58+0300: Started server process [44165]
[INFO|on|L46] 2024-04-11T22:47:58+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:47:58+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:47:58+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:47:58+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T22:48:03+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:48:03+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:48:03+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:48:03+0300: 127.0.0.1:56064 - "POST /api/v1/users/invites?name=User HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:48:03+0300: {'protocol': 'http', 'path': '/api/v1/users/invites', 'process_time': 0.0745992660522461}
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[0:10]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[12:20]
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_data with data[21:25]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[26:34]
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_data with data[35:41]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[42:47]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[49:58]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_start with no data
[DEBUG|multipart|L623] 2024-04-11T22:48:27+0300: Calling on_field_name with data[60:73]
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_field_end with no data
[DEBUG|multipart|L626] 2024-04-11T22:48:27+0300: Calling on_end with no data
[DEBUG|auth_service|L34] 2024-04-11T22:48:27+0300: request for token creating
[DEBUG|security|L20] 2024-04-11T22:48:27+0300: password verifying
[WARNING|bcrypt|L622] 2024-04-11T22:48:27+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[WARNING|bcrypt|L622] 2024-04-11T22:48:27+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
[DEBUG|bcrypt|L625] 2024-04-11T22:48:27+0300: detected 'bcrypt' backend, version '<unknown>'
[DEBUG|bcrypt|L406] 2024-04-11T22:48:27+0300: 'bcrypt' backend lacks $2$ support, enabling workaround
[DEBUG|auth_service|L71] 2024-04-11T22:48:28+0300: access token created
[DEBUG|auth_service|L76] 2024-04-11T22:48:28+0300: refresh token created
[INFO|h11_impl|L482] 2024-04-11T22:48:28+0300: 127.0.0.1:37440 - "POST /api/v1/auth/token HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:48:28+0300: {'protocol': 'http', 'path': '/api/v1/auth/token', 'process_time': 0.2461225986480713}
[DEBUG|dependency_auth|L42] 2024-04-11T22:49:02+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:49:02+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:49:02+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[INFO|h11_impl|L482] 2024-04-11T22:49:02+0300: 127.0.0.1:48404 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:49:02+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    User.friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[ERROR|h11_impl|L417] 2024-04-11T22:49:02+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    User.friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[INFO|h11_impl|L482] 2024-04-11T22:49:20+0300: 127.0.0.1:53886 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:49:20+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.0007710456848144531}
[DEBUG|dependency_auth|L42] 2024-04-11T22:49:20+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:49:20+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:49:20+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[INFO|h11_impl|L482] 2024-04-11T22:49:20+0300: 127.0.0.1:53886 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:49:20+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    User.friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[ERROR|h11_impl|L417] 2024-04-11T22:49:20+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    User.friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[INFO|server|L265] 2024-04-11T22:52:14+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:52:14+0300: Finished server process [44165]
[DEBUG|selector_events|L54] 2024-04-11T22:52:15+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:52:15+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:52:15+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:52:15+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:52:15+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:52:16+0300: Started server process [45086]
[INFO|on|L46] 2024-04-11T22:52:16+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:52:16+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:52:16+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:52:16+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T22:52:18+0300: 127.0.0.1:57504 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:52:18+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.001192331314086914}
[DEBUG|dependency_auth|L42] 2024-04-11T22:52:18+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:52:18+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:52:18+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[INFO|h11_impl|L482] 2024-04-11T22:52:18+0300: 127.0.0.1:57504 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:52:18+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    user_friends.add(friend)
AttributeError: 'bool' object has no attribute 'add'
[ERROR|h11_impl|L417] 2024-04-11T22:52:18+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    user_friends.add(friend)
AttributeError: 'bool' object has no attribute 'add'
[INFO|server|L265] 2024-04-11T22:52:42+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:52:42+0300: Finished server process [45086]
[DEBUG|selector_events|L54] 2024-04-11T22:52:43+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:52:44+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:52:44+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:52:44+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:52:44+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:52:44+0300: Started server process [45273]
[INFO|on|L46] 2024-04-11T22:52:44+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:52:44+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:52:44+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:52:44+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T22:52:45+0300: 127.0.0.1:50900 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:52:45+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.0009744167327880859}
[DEBUG|dependency_auth|L42] 2024-04-11T22:52:45+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:52:45+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:52:45+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[INFO|h11_impl|L482] 2024-04-11T22:52:45+0300: 127.0.0.1:50900 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:52:45+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 55, in add_friend
    user_friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[ERROR|h11_impl|L417] 2024-04-11T22:52:45+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1327, in __getattr__
    return self._fallback_getattr(key)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 1296, in _fallback_getattr
    raise AttributeError(key)
AttributeError: add

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 55, in add_friend
    user_friends.add(friend)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with User.friends has an attribute 'add'
[INFO|server|L265] 2024-04-11T22:52:55+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:52:55+0300: Finished server process [45273]
[DEBUG|selector_events|L54] 2024-04-11T22:52:55+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:52:56+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:52:56+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:52:56+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:52:56+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:52:56+0300: Started server process [45353]
[INFO|on|L46] 2024-04-11T22:52:56+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:52:56+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:52:56+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:52:56+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T22:52:58+0300: 127.0.0.1:45366 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:52:58+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.001247406005859375}
[DEBUG|dependency_auth|L42] 2024-04-11T22:52:58+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:52:58+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:52:58+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[INFO|h11_impl|L482] 2024-04-11T22:52:58+0300: 127.0.0.1:45366 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:52:58+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    user_friends = await User.friends
TypeError: object InstrumentedAttribute can't be used in 'await' expression
[ERROR|h11_impl|L417] 2024-04-11T22:52:58+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 89, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 54, in add_friend
    user_friends = await User.friends
TypeError: object InstrumentedAttribute can't be used in 'await' expression
[INFO|server|L265] 2024-04-11T22:53:23+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:53:23+0300: Finished server process [45353]
[DEBUG|selector_events|L54] 2024-04-11T22:53:23+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:53:24+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:53:24+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:53:24+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:53:24+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:53:24+0300: Started server process [45493]
[INFO|on|L46] 2024-04-11T22:53:24+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:53:24+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:53:24+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:53:24+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T22:53:27+0300: 127.0.0.1:58338 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:53:27+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.0010111331939697266}
[DEBUG|dependency_auth|L42] 2024-04-11T22:53:27+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:53:27+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:53:27+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[DEBUG|friends_service|L84] 2024-04-11T22:53:27+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') added in friend invitee_id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8')
[INFO|h11_impl|L482] 2024-04-11T22:53:27+0300: 127.0.0.1:58338 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:53:27+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}

[ERROR|h11_impl|L417] 2024-04-11T22:53:27+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 315, in app
    content = await serialize_response(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 3 validation errors:
  {'type': 'missing', 'loc': ('response', 'name'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'email'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}
  {'type': 'missing', 'loc': ('response', 'id'), 'msg': 'Field required', 'input': {'message': 'Invite accepted'}, 'url': 'https://errors.pydantic.dev/2.6/v/missing'}

[INFO|server|L265] 2024-04-11T22:53:50+0300: Shutting down
[INFO|server|L87] 2024-04-11T22:53:50+0300: Finished server process [45493]
[DEBUG|selector_events|L54] 2024-04-11T22:53:50+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T22:53:51+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T22:53:51+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T22:53:51+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T22:53:51+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T22:53:51+0300: Started server process [45614]
[INFO|on|L46] 2024-04-11T22:53:51+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T22:53:51+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T22:53:51+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T22:53:51+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[INFO|h11_impl|L482] 2024-04-11T22:54:05+0300: 127.0.0.1:46702 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/ HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:54:05+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675/', 'process_time': 0.0007812976837158203}
[DEBUG|dependency_auth|L42] 2024-04-11T22:54:05+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:54:05+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:54:05+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('208be048-b0ca-4452-b6b2-f214c1709675')
[DEBUG|friends_service|L84] 2024-04-11T22:54:05+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') added in friend invitee_id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8')
[INFO|h11_impl|L482] 2024-04-11T22:54:05+0300: 127.0.0.1:46702 - "POST /api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:54:05+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/208be048-b0ca-4452-b6b2-f214c1709675', 'process_time': 0.06909584999084473}
[DEBUG|dependency_auth|L42] 2024-04-11T22:54:29+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:54:29+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T22:54:29+0300: 127.0.0.1:37548 - "POST /api/v1/users/friends HTTP/1.1" 400
[DEBUG|log_middleware|L17] 2024-04-11T22:54:29+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.006161689758300781}
[DEBUG|dependency_auth|L42] 2024-04-11T22:54:35+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:54:35+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[INFO|h11_impl|L482] 2024-04-11T22:54:35+0300: 127.0.0.1:49020 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:54:35+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.013729572296142578}
[DEBUG|dependency_auth|L42] 2024-04-11T22:54:45+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:54:45+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:54:45+0300: 127.0.0.1:46874 - "GET /api/v1/users/friends HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:54:45+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.009002923965454102}
[DEBUG|dependency_auth|L42] 2024-04-11T22:55:05+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:55:05+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:55:05+0300: 127.0.0.1:52054 - "POST /api/v1/users/invites?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:55:05+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 123, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 44, in create_invite
    raise Exception # for example, will be removed later
Exception
[ERROR|h11_impl|L417] 2024-04-11T22:55:05+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 123, in create_friend_invite
    return await friends_service.create_invite(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 44, in create_invite
    raise Exception # for example, will be removed later
Exception
[DEBUG|dependency_auth|L42] 2024-04-11T22:55:32+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:55:32+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:55:32+0300: 127.0.0.1:34432 - "POST /api/v1/users/friends?name=User HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:55:32+0300: {'protocol': 'http', 'path': '/api/v1/users/friends', 'process_time': 0.017088890075683594}
[DEBUG|dependency_auth|L42] 2024-04-11T22:55:48+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:55:48+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[INFO|h11_impl|L482] 2024-04-11T22:55:48+0300: 127.0.0.1:50750 - "POST /api/v1/users/friends?name=User HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:55:48+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 102, in remove_from_friends
    return await self.user_repo.remove_friend(user=user, **criteries)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 70, in remove_friend
    raise RecordNotFoundError # for exampel of exception it will be refactored
src.crud.exceptions.RecordNotFoundError: Record not found
[ERROR|h11_impl|L417] 2024-04-11T22:55:48+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 134, in remove_from_friends
    return await friends_service.remove_from_friends(user=user, id=id, name=name)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 102, in remove_from_friends
    return await self.user_repo.remove_friend(user=user, **criteries)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 70, in remove_friend
    raise RecordNotFoundError # for exampel of exception it will be refactored
src.crud.exceptions.RecordNotFoundError: Record not found
[INFO|h11_impl|L482] 2024-04-11T22:56:27+0300: 127.0.0.1:36430 - "POST /api/v1/users/invite?name=Use HTTP/1.1" 307
[DEBUG|log_middleware|L17] 2024-04-11T22:56:27+0300: {'protocol': 'http', 'path': '/api/v1/users/invite', 'process_time': 0.0007469654083251953}
[INFO|h11_impl|L482] 2024-04-11T22:56:27+0300: 127.0.0.1:36430 - "POST /api/v1/users/invite/?name=Use HTTP/1.1" 405
[DEBUG|log_middleware|L17] 2024-04-11T22:56:27+0300: {'protocol': 'http', 'path': '/api/v1/users/invite/', 'process_time': 0.0006906986236572266}
[DEBUG|dependency_auth|L42] 2024-04-11T22:56:31+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:56:31+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[DEBUG|friends_service|L49] 2024-04-11T22:56:31+0300: Created invite user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') to friend.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df')
[INFO|h11_impl|L482] 2024-04-11T22:56:31+0300: 127.0.0.1:36430 - "POST /api/v1/users/invites?name=User HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:56:31+0300: {'protocol': 'http', 'path': '/api/v1/users/invites', 'process_time': 0.014846324920654297}
[DEBUG|dependency_auth|L42] 2024-04-11T22:56:44+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:56:44+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[ERROR|friends_service|L74] 2024-04-11T22:56:44+0300: There is no Invite invite_id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3') for User curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8')
[ERROR|friends_service|L74] 2024-04-11T22:56:44+0300: There is no Invite invite_id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3') for User curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8')
[INFO|h11_impl|L482] 2024-04-11T22:56:44+0300: 127.0.0.1:45206 - "POST /api/v1/users/invites/accept/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:56:44+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 88, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 75, in accept_invite
    raise  NoAbleToAccept # DO
src.services.friends_service.NoAbleToAccept
[ERROR|h11_impl|L417] 2024-04-11T22:56:44+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 88, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 75, in accept_invite
    raise  NoAbleToAccept # DO
src.services.friends_service.NoAbleToAccept
[DEBUG|dependency_auth|L42] 2024-04-11T22:56:56+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:56:56+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[ERROR|friends_service|L92] 2024-04-11T22:56:56+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[ERROR|friends_service|L92] 2024-04-11T22:56:56+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[INFO|h11_impl|L482] 2024-04-11T22:56:56+0300: 127.0.0.1:35472 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:56:56+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[ERROR|h11_impl|L417] 2024-04-11T22:56:56+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[DEBUG|dependency_auth|L42] 2024-04-11T22:57:36+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:57:36+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[ERROR|friends_service|L92] 2024-04-11T22:57:36+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[ERROR|friends_service|L92] 2024-04-11T22:57:36+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[INFO|h11_impl|L482] 2024-04-11T22:57:36+0300: 127.0.0.1:42206 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:57:36+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[ERROR|h11_impl|L417] 2024-04-11T22:57:36+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[DEBUG|dependency_auth|L42] 2024-04-11T22:57:37+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:57:37+0300: User 904e2189-f066-47ab-a270-4cad2119aeb8 authenticated
[ERROR|friends_service|L92] 2024-04-11T22:57:37+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[ERROR|friends_service|L92] 2024-04-11T22:57:37+0300: curr_user.id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8') no such invite for user
[INFO|h11_impl|L482] 2024-04-11T22:57:37+0300: 127.0.0.1:42216 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T22:57:37+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[ERROR|h11_impl|L417] 2024-04-11T22:57:37+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 95, in declain_invite
    return await friends_service.declain_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 93, in declain_invite
    raise  NoAbleToAccept
src.services.friends_service.NoAbleToAccept
[INFO|h11_impl|L482] 2024-04-11T22:57:51+0300: 127.0.0.1:37194 - "GET /api/v1/users/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 404
[DEBUG|log_middleware|L17] 2024-04-11T22:57:51+0300: {'protocol': 'http', 'path': '/api/v1/users/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.0009121894836425781}
[DEBUG|dependency_auth|L42] 2024-04-11T22:58:01+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:58:01+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T22:58:01+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T22:58:01+0300: 127.0.0.1:43464 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:58:01+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.00892949104309082}
[DEBUG|dependency_auth|L42] 2024-04-11T22:58:28+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T22:58:28+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T22:58:28+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[DEBUG|friends_service|L84] 2024-04-11T22:58:28+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') added in friend invitee_id=UUID('904e2189-f066-47ab-a270-4cad2119aeb8')
[INFO|h11_impl|L482] 2024-04-11T22:58:28+0300: 127.0.0.1:36610 - "POST /api/v1/users/invites/accept/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T22:58:28+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/accept/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.016135692596435547}
[INFO|server|L265] 2024-04-11T23:02:15+0300: Shutting down
[INFO|server|L87] 2024-04-11T23:02:15+0300: Finished server process [45614]
[DEBUG|selector_events|L54] 2024-04-11T23:02:16+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T23:02:17+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T23:02:17+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T23:02:17+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T23:02:17+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T23:02:17+0300: Started server process [47393]
[INFO|on|L46] 2024-04-11T23:02:17+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T23:02:17+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T23:02:17+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T23:02:17+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T23:02:22+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:02:22+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L79] 2024-04-11T23:02:22+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') accepted invite invite_id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:02:22+0300: 127.0.0.1:36974 - "POST /api/v1/users/invites/accept/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 500
[ERROR|h11_impl|L417] 2024-04-11T23:02:22+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 88, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 51, in add_friend
    raise RecordNotFoundError # for exampel of exception it will be refactored
src.crud.exceptions.RecordNotFoundError: Record not found
[ERROR|h11_impl|L417] 2024-04-11T23:02:22+0300: Exception in ASGI application
Traceback (most recent call last):
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/vanya/fastProject/src/middlewares/log_middleware.py", line 13, in __call__
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/home/vanya/fastProject/myvenv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/vanya/fastProject/src/routers/users.py", line 88, in accept_invite
    return await friends_service.accept_invite(curr_user=user, invite_id=invite_id)
  File "/home/vanya/fastProject/src/services/friends_service.py", line 82, in accept_invite
    await self.user_repo.add_friend(curr_user, id=invitee_id)
  File "/home/vanya/fastProject/src/crud/user_repository.py", line 51, in add_friend
    raise RecordNotFoundError # for exampel of exception it will be refactored
src.crud.exceptions.RecordNotFoundError: Record not found
[DEBUG|dependency_auth|L42] 2024-04-11T23:02:53+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:02:54+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T23:02:54+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:02:54+0300: 127.0.0.1:38422 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T23:02:54+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.010153770446777344}
[INFO|server|L265] 2024-04-11T23:03:16+0300: Shutting down
[INFO|server|L87] 2024-04-11T23:03:16+0300: Finished server process [47393]
[DEBUG|selector_events|L54] 2024-04-11T23:03:17+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T23:03:18+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T23:03:18+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T23:03:18+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T23:03:18+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T23:03:18+0300: Started server process [47615]
[INFO|on|L46] 2024-04-11T23:03:18+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T23:03:18+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T23:03:18+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T23:03:18+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T23:03:25+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:03:25+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T23:03:25+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:03:25+0300: 127.0.0.1:37782 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T23:03:25+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.06062197685241699}
[INFO|server|L265] 2024-04-11T23:10:02+0300: Shutting down
[INFO|server|L87] 2024-04-11T23:10:02+0300: Finished server process [47615]
[DEBUG|selector_events|L54] 2024-04-11T23:10:03+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T23:10:03+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T23:10:03+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T23:10:03+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T23:10:03+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T23:10:04+0300: Started server process [49124]
[INFO|on|L46] 2024-04-11T23:10:04+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T23:10:04+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T23:10:04+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T23:10:04+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T23:10:06+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:10:06+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T23:10:06+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:10:06+0300: 127.0.0.1:50800 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T23:10:06+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.0541384220123291}
[INFO|server|L265] 2024-04-11T23:10:37+0300: Shutting down
[INFO|server|L87] 2024-04-11T23:10:38+0300: Finished server process [49124]
[DEBUG|selector_events|L54] 2024-04-11T23:10:38+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T23:10:38+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T23:10:38+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T23:10:38+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T23:10:38+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T23:10:39+0300: Started server process [49310]
[INFO|on|L46] 2024-04-11T23:10:39+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T23:10:39+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T23:10:39+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T23:10:39+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T23:10:42+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:10:42+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T23:10:42+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:10:42+0300: 127.0.0.1:36222 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T23:10:42+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.06318807601928711}
[INFO|server|L265] 2024-04-11T23:26:12+0300: Shutting down
[INFO|server|L87] 2024-04-11T23:26:12+0300: Finished server process [49310]
[DEBUG|selector_events|L54] 2024-04-11T23:26:13+0300: Using selector: EpollSelector
[DEBUG|__init__|L449] 2024-04-11T23:26:13+0300: loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
[DEBUG|__init__|L449] 2024-04-11T23:26:13+0300: loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
[DEBUG|__init__|L449] 2024-04-11T23:26:13+0300: loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
[DEBUG|registry|L296] 2024-04-11T23:26:13+0300: registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
[INFO|server|L77] 2024-04-11T23:26:13+0300: Started server process [52223]
[INFO|on|L46] 2024-04-11T23:26:13+0300: Waiting for application startup.
[INFO|on|L94] 2024-04-11T23:26:13+0300: ASGI 'lifespan' protocol appears unsupported.
[INFO|on|L60] 2024-04-11T23:26:13+0300: Application startup complete.
[INFO|server|L219] 2024-04-11T23:26:13+0300: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[DEBUG|dependency_auth|L42] 2024-04-11T23:26:17+0300: Request for curr user id
[DEBUG|dependency_auth|L32] 2024-04-11T23:26:17+0300: User 4c1a3151-7378-424b-85a2-5ff6f357b7df authenticated
[DEBUG|friends_service|L96] 2024-04-11T23:26:17+0300: curr_user.id=UUID('4c1a3151-7378-424b-85a2-5ff6f357b7df') declained invite invite.id=UUID('c4284335-d049-47cb-bcbe-1aaf344be6f3')
[INFO|h11_impl|L482] 2024-04-11T23:26:17+0300: 127.0.0.1:49758 - "POST /api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3 HTTP/1.1" 200
[DEBUG|log_middleware|L17] 2024-04-11T23:26:17+0300: {'protocol': 'http', 'path': '/api/v1/users/invites/declain/c4284335-d049-47cb-bcbe-1aaf344be6f3', 'process_time': 0.05774641036987305}
